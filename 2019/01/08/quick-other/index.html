<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.0.6" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.6">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.6">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.6">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.6" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.0.6',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Linux | NoSql | MongoDB">
<meta name="keywords" content="linux">
<meta property="og:type" content="article">
<meta property="og:title" content="quick-other">
<meta property="og:url" content="http://JIUXINYAN.com/2019/01/08/quick-other/index.html">
<meta property="og:site_name" content="moxin-blog">
<meta property="og:description" content="Linux | NoSql | MongoDB">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://jiuxinyan.com/images/185.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/186.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/201.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/208.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/210.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/209.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/209.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/202.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/203.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/187.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/188.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/189.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/190.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/191.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/192.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/193.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/194.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/28.png">
<meta property="og:image" content="http://jiuxinyan.com/images/29.png">
<meta property="og:image" content="http://jiuxinyan.com/images/196.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/198.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/199.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/195.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/200.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/30.png">
<meta property="og:image" content="http://jiuxinyan.com/images/204.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/205.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/206.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/207.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/211.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/212.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/213.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/214.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/215.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/216.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/31.png">
<meta property="og:image" content="http://jiuxinyan.com/images/32.png">
<meta property="og:image" content="http://jiuxinyan.com/images/33.png">
<meta property="og:image" content="http://jiuxinyan.com/images/35.png">
<meta property="og:image" content="http://jiuxinyan.com/images/36.png">
<meta property="og:image" content="http://jiuxinyan.com/images/37.png">
<meta property="og:image" content="http://jiuxinyan.com/images/38.png">
<meta property="og:image" content="http://jiuxinyan.com/images/34.png">
<meta property="og:image" content="http://jiuxinyan.com/images/39.png">
<meta property="og:image" content="http://jiuxinyan.com/images/41.png">
<meta property="og:image" content="http://jiuxinyan.com/images/220.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/42.png">
<meta property="og:image" content="http://jiuxinyan.com/images/43.png">
<meta property="og:image" content="http://jiuxinyan.com/images/225.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/227.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/219.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/222.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/223.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/224.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/225.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/226.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/45.png">
<meta property="og:image" content="http://jiuxinyan.com/images/44.png">
<meta property="og:image" content="http://jiuxinyan.com/images/46.png">
<meta property="og:image" content="http://jiuxinyan.com/images/47.png">
<meta property="og:image" content="http://jiuxinyan.com/images/48.png">
<meta property="og:image" content="http://jiuxinyan.com/images/228.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/49.png">
<meta property="og:image" content="http://jiuxinyan.com/images/50.png">
<meta property="og:image" content="http://jiuxinyan.com/images/229.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/51.png">
<meta property="og:image" content="http://jiuxinyan.com/images/52.png">
<meta property="og:image" content="http://jiuxinyan.com/images/230.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/231.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/233.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/232.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/234.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/235.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/236.jpg">
<meta property="og:image" content="http://jiuxinyan.com/images/53.png">
<meta property="og:updated_time" content="2019-02-19T08:40:22.998Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="quick-other">
<meta name="twitter:description" content="Linux | NoSql | MongoDB">
<meta name="twitter:image" content="http://jiuxinyan.com/images/185.jpg">






  <link rel="canonical" href="http://JIUXINYAN.com/2019/01/08/quick-other/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>quick-other | moxin-blog</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    <a href="https://https://github.com/JIUXINYAN" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> 

<div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">moxin-blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        
          
  <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>
</li>

      

      
    </ul>
  

  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://JIUXINYAN.com/2019/01/08/quick-other/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JIUXINYAN">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/a.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="moxin-blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">quick-other</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-08T14:48:48+08:00">2019-01-08</time>
            

            
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/quick/" itemprop="url" rel="index"><span itemprop="name">quick</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Linux | NoSql | MongoDB<br><a id="more"></a></p>
<h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><h2 id="文件和目录"><a href="#文件和目录" class="headerlink" title="文件和目录"></a>文件和目录</h2><h3 id="linux目录"><a href="#linux目录" class="headerlink" title="linux目录"></a>linux目录</h3><p><strong>/</strong></p>
<blockquote>
<p>表示Linux的根目录，作用是存放一切Linux相关目录和文件，包括核心和非核心的</p>
</blockquote>
<h4 id="第一级目录"><a href="#第一级目录" class="headerlink" title="第一级目录"></a>第一级目录</h4><table>
<thead>
<tr>
<th>目录</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>/bin</strong></td>
<td>存放最经常使用的命令</td>
</tr>
<tr>
<td><strong>/sbin</strong></td>
<td>存放系统管理员使用的系统管理程序</td>
</tr>
<tr>
<td><strong>/home</strong></td>
<td>存放普通用户的主目录，每个主目录以用户账号命名</td>
</tr>
<tr>
<td><strong>/root</strong></td>
<td>为系统管理员的用户主目录</td>
</tr>
<tr>
<td><strong>/dev</strong></td>
<td>管理设备</td>
</tr>
<tr>
<td><strong>/media</strong></td>
<td>镜像光盘的目录，如U盘光驱等，识别后会挂载到这个目录下</td>
</tr>
<tr>
<td><strong>/mnt</strong></td>
<td>挂载的文件夹，可以将外部的存储挂载在/mnt上，进入该目录就可以查看内容</td>
</tr>
<tr>
<td><strong>/etc</strong></td>
<td>存放配置文件</td>
</tr>
<tr>
<td><strong>/usr</strong></td>
<td>存放用户安装的应用程序和文件</td>
</tr>
<tr>
<td><strong>/usr/local</strong></td>
<td>存放主机额外安装软件</td>
</tr>
<tr>
<td><strong>/lib</strong></td>
<td>系统开机时所需要最基本的动态连接共享库</td>
</tr>
<tr>
<td><strong>/boot</strong></td>
<td>存放启动linux时使用的一些核心文件</td>
</tr>
<tr>
<td><strong>/tmp</strong></td>
<td>存放一些临时文件</td>
</tr>
<tr>
<td><strong>/selinux</strong></td>
<td>安全目录</td>
</tr>
<tr>
<td><strong>/opt</strong></td>
<td>存放主机额外安装软件</td>
</tr>
<tr>
<td><strong>/var</strong></td>
<td>变量、日志</td>
</tr>
<tr>
<td><strong>/proc</strong></td>
<td>系统内存的映射。获取系统信息 (别动)</td>
</tr>
<tr>
<td><strong>/srv</strong></td>
<td>存放服务启动后需要提取的数据 (别动)</td>
</tr>
<tr>
<td><strong>/sys</strong></td>
<td>内核相关目录 (别动)</td>
</tr>
<tr>
<td><strong>/lost+found</strong></td>
<td>一般为空目录，非法关机后就存放了一些文件</td>
</tr>
</tbody>
</table>
<h3 id="linux文件"><a href="#linux文件" class="headerlink" title="linux文件"></a>linux文件</h3><p><img src="/images/185.jpg" alt="185"></p>
<p><img src="/images/186.jpg" alt="186"></p>
<h4 id="文件类型"><a href="#文件类型" class="headerlink" title="文件类型"></a>文件类型</h4><table>
<thead>
<tr>
<th>表示</th>
<th>文件类型</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>-</strong></td>
<td>普通文件</td>
</tr>
<tr>
<td><strong>d</strong></td>
<td>目录</td>
</tr>
<tr>
<td><strong>l</strong></td>
<td>软连接</td>
</tr>
<tr>
<td><strong>c</strong></td>
<td>字符设备【键盘，鼠标】</td>
</tr>
<tr>
<td><strong>d</strong></td>
<td>块文件，硬盘</td>
</tr>
</tbody>
</table>
<h3 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h3><h4 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h4><table>
<thead>
<tr>
<th>表示</th>
<th>权限</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>r</strong></td>
<td>代表可读(read) : 可以读取、查看</td>
</tr>
<tr>
<td><strong>w</strong></td>
<td>代表可写(write) : 可以修改，不代表可以删除</td>
</tr>
<tr>
<td><strong>x</strong></td>
<td>代表可执行(execute) : 可以被执行</td>
</tr>
</tbody>
</table>
<h4 id="目录权限"><a href="#目录权限" class="headerlink" title="目录权限"></a>目录权限</h4><table>
<thead>
<tr>
<th>表示</th>
<th>权限</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>r</strong></td>
<td>代表可读(read) : 可以读取，ls查看目录内容</td>
</tr>
<tr>
<td><strong>w</strong></td>
<td>代表可写(write) : 可以修改，目录内创建+删除+重命名目录</td>
</tr>
<tr>
<td><strong>x</strong></td>
<td>代表可执行(execute) : 可以进入该目录</td>
</tr>
</tbody>
</table>
<h2 id="linux命令"><a href="#linux命令" class="headerlink" title="linux命令"></a>linux命令</h2><h3 id="开机关机"><a href="#开机关机" class="headerlink" title="开机关机"></a>开机关机</h3><table>
<thead>
<tr>
<th>命令格式</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><a href="#shutdown">shutdown</a></strong></td>
<td>按照规定关机，以分钟作为单位</td>
</tr>
<tr>
<td><strong><a href="#halt">halt</a></strong></td>
<td>关机，作用如上</td>
</tr>
<tr>
<td><strong><a href="#reboot">reboot</a></strong></td>
<td>重启操作系统（不推荐）</td>
</tr>
<tr>
<td><strong>sync</strong></td>
<td>把内存的数据同步到磁盘</td>
</tr>
</tbody>
</table>
<p><span id="shutdown"><strong>shutdown</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-t seconds : 设定在几秒钟之后进行关机程序</li>
<li>-r : 关机后重新开机</li>
<li>-h : 关机后停机</li>
<li>-c : 取消目前已经进行中的关机动作</li>
<li>time : 设定关机的时间</li>
<li>message : 传送给所有使用者的警告讯息</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">立即关机</span><br><span class="line"><span class="meta">#</span><span class="bash"> shutdown -h now</span></span><br><span class="line"></span><br><span class="line">立即重启</span><br><span class="line"><span class="meta">#</span><span class="bash"> shutdown -r now</span></span><br><span class="line"></span><br><span class="line">1分钟后关机</span><br><span class="line"><span class="meta">#</span><span class="bash"> shutdown -h 1</span></span><br><span class="line"></span><br><span class="line">指定5分钟后关机</span><br><span class="line"><span class="meta">#</span><span class="bash"> shutdown +5 “System will shutdown after 5 minutes”</span></span><br></pre></td></tr></table></figure>
<p><span id="reboot"><strong>reboot</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-n : 在重开机前不做将记忆体资料写回硬盘的动作</li>
<li>-w : 并不会真的重开机，只是把记录写到 /var/log/wtmp 档案里</li>
<li>-d : 不把记录写到 /var/log/wtmp 档案里（-n 这个参数包含了 -d）</li>
<li>-f : 强迫重开机，不呼叫 shutdown 这个指令</li>
<li>-i : 在重开机之前先把所有网络相关的装置先停止</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">重新启动</span><br><span class="line"><span class="meta">#</span><span class="bash"> reboot</span></span><br></pre></td></tr></table></figure>
<p><span id="halt"><strong>halt</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-n : 在关机前不做将记忆体资料写回硬盘的动作</li>
<li>-w : 并不会真的关机，只是把记录写到 /var/log/wtmp 档案里</li>
<li>-d : 不把记录写到 /var/log/wtmp 档案里（-n 这个参数包含了 -d） -f : 强迫关机，不呼叫 shutdown 这个指令</li>
<li>-i : 在关机之前先把所有网络相关的装置先停止</li>
<li>-p : 当关机的时候，顺便做关闭电源（poweroff）的动作</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">关闭系统</span><br><span class="line"><span class="meta">#</span><span class="bash"> halt</span></span><br><span class="line"></span><br><span class="line">关闭系统并关闭电源</span><br><span class="line"><span class="meta">#</span><span class="bash"> halt -p</span></span><br><span class="line"></span><br><span class="line">关闭系统，但不留下纪录</span><br><span class="line"><span class="meta">#</span><span class="bash"> halt -d</span></span><br></pre></td></tr></table></figure>
<h3 id="系统管理"><a href="#系统管理" class="headerlink" title="系统管理"></a>系统管理</h3><table>
<thead>
<tr>
<th>命令格式</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><a href="#id">id</a></strong></td>
<td>用于显示用户的ID，以及所属群组的ID。</td>
</tr>
<tr>
<td><strong><a href="#useradd">useradd</a></strong></td>
<td>添加用户</td>
</tr>
<tr>
<td><strong><a href="#userdel">userdel</a></strong></td>
<td>删除用户</td>
</tr>
<tr>
<td><strong><a href="#usermod">usermod</a></strong></td>
<td>修改用户账号 修改用户所在组</td>
</tr>
<tr>
<td><strong><a href="#groupadd">groupadd</a></strong></td>
<td>新增组</td>
</tr>
<tr>
<td><strong>groupdel</strong></td>
<td>删除组</td>
</tr>
<tr>
<td><strong><a href="#groupmod">groupmod</a></strong></td>
<td>修改组</td>
</tr>
<tr>
<td><a href="#history"><strong>–help</strong> / <strong>man</strong></a></td>
<td>查看帮助</td>
</tr>
<tr>
<td><strong><a href="#history">history</a></strong></td>
<td>显示当前登录用户的操作历史</td>
</tr>
<tr>
<td><strong><a href="#crond">crond</a></strong></td>
<td>进行定时任务的设置</td>
</tr>
<tr>
<td><strong><a href="#whereis">whereis</a></strong></td>
<td>在特定目录中查找符合条件的文件</td>
</tr>
</tbody>
</table>
<p><span id="id"><strong>id</strong></span></p>
<blockquote>
<p><strong>语法</strong>：</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id [-gGnru][--help][--version][用户名称]</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-g 　显示用户所属群组的ID。</li>
<li>-G 　显示用户所属附加群组的ID。</li>
<li>-n 　显示用户，所属群组或附加群组的名称。</li>
<li>-r 　显示实际ID。</li>
<li>-u 　显示用户ID。</li>
<li>-help 　显示帮助。</li>
<li>-version 　显示版本信息。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">显示当前用户ID 当前用户群组的ID</span><br><span class="line"><span class="meta">#</span><span class="bash"> id</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> id -g</span></span><br><span class="line"></span><br><span class="line">显示某个用户ID 群组ID</span><br><span class="line"><span class="meta">#</span><span class="bash"> id zwj</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> id -g zwj</span></span><br></pre></td></tr></table></figure>
<p><span id="useradd"><strong>useradd</strong></span></p>
<blockquote>
<p><strong>语法</strong>：</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd [-mMnr][-c &lt;备注&gt;][-d &lt;登入目录&gt;][-e &lt;有效期限&gt;][-f &lt;缓冲天数&gt;][-g &lt;群组&gt;][-G &lt;群组&gt;][-s &lt;shell&gt;][-u &lt;uid&gt;][用户帐号]</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-c (备注)　加上备注文字。备注文字会保存在passwd的备注栏位中。</li>
<li>-d (登入目录) 　指定用户登入时的启始目录。</li>
<li>-D 　变更预设值．</li>
<li>-e (有效期限) 　指定帐号的有效期限。</li>
<li>-f (缓冲天数) 　指定在密码过期后多少天即关闭该帐号。</li>
<li>-g (群组) 　指定用户所属的群组。</li>
<li>-G (群组) 　指定用户所属的附加群组。</li>
<li>-m 　自动建立用户的登入目录。</li>
<li>-M 　不要自动建立用户的登入目录。</li>
<li>-n 　取消建立以用户名称为名的群组．</li>
<li>-r 　建立系统帐号。</li>
<li>-s (shell)　 　指定用户登入后所使用的shell。</li>
<li>-u (uid) 　指定用户ID。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">添加一个用户zsx</span><br><span class="line"><span class="meta">#</span><span class="bash"> useradd zsx</span></span><br><span class="line"></span><br><span class="line">为添加的zsx用户指定组super</span><br><span class="line"><span class="meta">#</span><span class="bash"> useradd -g super zsx</span></span><br><span class="line"></span><br><span class="line">创建一个系统用户</span><br><span class="line"><span class="meta">#</span><span class="bash"> useradd -r zsx</span></span><br><span class="line"></span><br><span class="line">为新添加的用户指定home目录</span><br><span class="line"><span class="meta">#</span><span class="bash"> useradd -d /home/myd zsx</span></span><br><span class="line"></span><br><span class="line">建立用户且制定ID</span><br><span class="line"><span class="meta">#</span><span class="bash"> useradd zsx -u 544</span></span><br></pre></td></tr></table></figure>
<p><span id="groupadd"><strong>groupadd</strong></span></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">创建一个组moster</span><br><span class="line"><span class="meta">#</span><span class="bash"> groupadd monster</span></span><br></pre></td></tr></table></figure>
<p><span id="userdel"><strong>userdel</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-r 　删除用户登入目录以及目录中所有文件。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">删除用户账号</span><br><span class="line"><span class="meta">#</span><span class="bash"> userdel zsx</span></span><br></pre></td></tr></table></figure>
<p><span id="usermod"><strong>usermod</strong></span></p>
<blockquote>
<p><strong>语法</strong>：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod [-LU][-c &lt;备注&gt;][-d &lt;登入目录&gt;][-e &lt;有效期限&gt;][-f &lt;缓冲天数&gt;][-g &lt;群组&gt;][-G &lt;群组&gt;][-l &lt;帐号名称&gt;][-s &lt;shell&gt;][-u &lt;uid&gt;] 用户</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-c &lt;备注&gt; 　修改用户帐号的备注文字。</li>
<li>-d &lt;登入目录&gt; 　修改用户登入时的目录。</li>
<li>-e &lt;有效期限&gt; 　修改帐号的有效期限。</li>
<li>-f &lt;缓冲天数&gt; 　修改在密码过期后多少天即关闭该帐号。</li>
<li>-g &lt;群组&gt; 　修改用户所属的群组。</li>
<li>-G &lt;群组&gt; 　修改用户所属的附加群组。</li>
<li>-l &lt;帐号名称&gt; 　修改用户帐号名称。</li>
<li>-L 　锁定用户密码，使密码无效。</li>
<li>-s (shell) 　修改用户登入后所使用的shell。</li>
<li>-u (uid) 　修改用户ID。</li>
<li>-U 　解除密码锁定。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">将tom用户从police组移动到bandit组</span><br><span class="line"><span class="meta">#</span><span class="bash"> usermod -g bandit tom</span></span><br></pre></td></tr></table></figure>
<p><span id="groupmod"><strong>groupmod</strong></span></p>
<blockquote>
<p><strong>语法</strong>：</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupmod [-g &lt;群组识别码&gt; &lt;-o&gt;][-n &lt;新群名&gt;][群名]</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-g  (群组识别码) 　设置欲使用的群组识别码。</li>
<li>-o 　重复使用群组识别码。</li>
<li>-n  (新群组名称) 　设置欲使用的群组名称。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">修改群名 把linuxso改为linux</span><br><span class="line"><span class="meta">#</span><span class="bash"> groupmod -n linux linuxso</span></span><br></pre></td></tr></table></figure>
<p><span id="help"><strong>–help</strong>和<strong>man</strong></span></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">查看ls指令有哪些选项</span><br><span class="line"><span class="meta">#</span><span class="bash"> ls --<span class="built_in">help</span></span></span><br><span class="line">查看某个命令的帮助(英文文档)</span><br><span class="line"><span class="meta">#</span><span class="bash"> man <span class="built_in">cd</span></span></span><br><span class="line">退出</span><br><span class="line"><span class="meta">#</span><span class="bash"> :q</span></span><br></pre></td></tr></table></figure>
<p><span id="history"><strong>history</strong></span></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">查看所有历史记录</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">history</span></span></span><br><span class="line"></span><br><span class="line">显示最近10条历史记录</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">history</span> 10</span></span><br><span class="line"></span><br><span class="line">执行历史编号为5的指令</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">history</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> !5</span></span><br></pre></td></tr></table></figure>
<p><span id="crond"><strong>crond</strong></span></p>
<blockquote>
<p><strong>语法</strong>：</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab [选项]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>常用选项：</p>
</blockquote>
<ul>
<li>-e  编辑crontab定时任务</li>
<li>-l    查询crontab任务</li>
<li>-r    删除当前用户所有的crontab任务</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">修改群名 把linuxso改为linux</span><br><span class="line"><span class="meta">#</span><span class="bash"> groupmod -n linux linuxso</span></span><br></pre></td></tr></table></figure>
<p><span id="whereis"><strong>whereis</strong></span></p>
<blockquote>
<p><strong>语法</strong>：</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis [-bfmsu][-B &lt;目录&gt;...][-M &lt;目录&gt;...][-S &lt;目录&gt;...][文件...]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>参数：</p>
</blockquote>
<ul>
<li>-b 　只查找二进制文件。</li>
<li>-B&lt;目录&gt; 　只在设置的目录下查找二进制文件。</li>
<li>-f 　不显示文件名前的路径名称。</li>
<li>-m 　只查找说明文件。</li>
<li>-M&lt;目录&gt; 　只在设置的目录下查找说明文件。</li>
<li>-s 　只查找原始代码文件。</li>
<li>-S&lt;目录&gt; 　只在设置的目录下查找原始代码文件。</li>
<li>-u 　查找不包含指定类型的文件。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">查看指令bash的位置</span><br><span class="line"><span class="meta">#</span><span class="bash"> whereis bash</span></span><br></pre></td></tr></table></figure>
<h3 id="文件目录"><a href="#文件目录" class="headerlink" title="文件目录"></a>文件目录</h3><p>ln -s file1 lnk1 创建一个指向文件或目录的软链接  </p>
<p>ln file1 lnk1 创建一个指向文件或目录的物理链接  </p>
<p>file file1 outputs the mime type of the file as text  </p>
<p>iconv -l 列出已知的编码  </p>
<table>
<thead>
<tr>
<th>命令格式</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#cd"><strong>cd</strong></a></td>
<td>切换目录</td>
</tr>
<tr>
<td><strong><a href="#pwd">pwd</a></strong></td>
<td>显示当前所在的工作目录</td>
</tr>
<tr>
<td><a href="#ls"><strong>ls</strong></a></td>
<td>列出目录当中的内容（目录和文件）</td>
</tr>
<tr>
<td><a href="#mkdir"><strong>mkdir</strong></a></td>
<td>创建目录</td>
</tr>
<tr>
<td><a href="#rm"><strong>rm/rmdir</strong></a></td>
<td>删除文件或目录</td>
</tr>
<tr>
<td><a href="#mv"><strong>mv</strong></a></td>
<td>移动目录或重命名</td>
</tr>
<tr>
<td><strong><a href="cp">cp</a></strong></td>
<td>复制文件或目录</td>
</tr>
<tr>
<td><strong><a href="#touch">touch</a></strong></td>
<td>创建文件 / 修改文件或目录的时间属性</td>
</tr>
<tr>
<td><strong><a href="#cat">cat</a></strong></td>
<td>用于输出文件内容</td>
</tr>
<tr>
<td><strong><a href="#more">more</a></strong></td>
<td>类似 cat ，不过会以一页一页的形式显示，</td>
</tr>
<tr>
<td><strong><a href="#less">less</a></strong></td>
<td>与 more 类似，但less 可以随意浏览文件，more 仅能向前移动</td>
</tr>
<tr>
<td><strong><a href="#ln">ln</a></strong></td>
<td>类似快捷方式，为某一个文件在另外一个位置建立一个同步的链接。</td>
</tr>
<tr>
<td><strong><a href="#chown">chown</a></strong></td>
<td>改变文件的拥有者及其所在组</td>
</tr>
<tr>
<td><strong><a href="#chgrp">chgrp</a></strong></td>
<td>修改文件所在组</td>
</tr>
<tr>
<td><strong><a href="#chmod">chmod</a></strong></td>
<td>修改文件权限</td>
</tr>
</tbody>
</table>
<p><span id="cd"><strong>cd</strong></span></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">进入/home目录</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> /home</span></span><br><span class="line"></span><br><span class="line">返回上一级目录</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> ..</span></span><br><span class="line"></span><br><span class="line">返回上两级目录</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> ../..</span></span><br><span class="line"></span><br><span class="line">进入个人的主目录</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> ~user1</span></span><br><span class="line"></span><br><span class="line">返回上次所在的目录</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> -</span></span><br></pre></td></tr></table></figure>
<p><span id="ls"><strong>ls</strong></span></p>
<blockquote>
<p><strong>参数</strong> :</p>
</blockquote>
<ul>
<li>-a 显示隐藏文件及目录</li>
<li>-l 详细列出</li>
<li>-r 文件以反序显示(英文字母)</li>
<li>-t 文件以建立时间先后次序列显示</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">列出目录当中的内容（目录和文件）</span><br><span class="line"><span class="meta">#</span><span class="bash"> ls</span></span><br><span class="line"></span><br><span class="line">显示目录下文件或者子目录的详细信息</span><br><span class="line"><span class="meta">#</span><span class="bash"> ls -l</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ll</span></span><br><span class="line"></span><br><span class="line">使用选项 -h:表示以人性化的方式显示列表</span><br><span class="line"><span class="meta">#</span><span class="bash"> ls -lh</span></span><br><span class="line"></span><br><span class="line">使用选项 -a（all）：表示显示全部文件（包括隐藏文件）</span><br><span class="line"><span class="meta">#</span><span class="bash"> ls -a</span></span><br><span class="line"></span><br><span class="line">查看目录中的文件</span><br><span class="line"><span class="meta">#</span><span class="bash"> ls -F   </span></span><br><span class="line"></span><br><span class="line">显示包含数字的文件名和目录名</span><br><span class="line"><span class="meta">#</span><span class="bash"> ls [0-9]   </span></span><br><span class="line"></span><br><span class="line">查看文件所有者</span><br><span class="line"><span class="meta">#</span><span class="bash"> ls -ahl</span></span><br></pre></td></tr></table></figure>
<p><span id="mkdir"><strong>mkdir</strong></span></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">创建一个叫做 'dir1' 的目录'  </span><br><span class="line"><span class="meta">#</span><span class="bash"> mkdir dir1 </span></span><br><span class="line"></span><br><span class="line">同时创建两个目录</span><br><span class="line"><span class="meta">#</span><span class="bash"> mkdir dir1 dir2 </span></span><br><span class="line"></span><br><span class="line">创建一个目录树</span><br><span class="line"><span class="meta">#</span><span class="bash"> mkdir -p /tmp/dir1/dir2</span></span><br></pre></td></tr></table></figure>
<p><span id="rm"><strong>rm</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-i 删除前逐一询问确认。</li>
<li>-f 亦直接删除，无需逐一确认。</li>
<li>-r 将目录及以下的文件以前删除。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">删除一个叫做 'dir1' 的目录并同时删除其内容</span><br><span class="line"><span class="meta">#</span><span class="bash"> rm -rf dir1     </span></span><br><span class="line"></span><br><span class="line">删除一个叫做 'dir1' 的空目录</span><br><span class="line"><span class="meta">#</span><span class="bash"> rmdir dir1   </span></span><br><span class="line"></span><br><span class="line">删除一个叫做 'file1' 的文件</span><br><span class="line"><span class="meta">#</span><span class="bash"> rm -f file1  </span></span><br><span class="line"></span><br><span class="line"> 同时删除两个目录及它们的内容</span><br><span class="line"><span class="meta">#</span><span class="bash"> rm -rf dir1 dir2</span></span><br></pre></td></tr></table></figure>
<p><span id="mv"><strong>mv</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-i: 询问是否覆盖旧文件;</li>
<li>-f: 无需询问覆盖;</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">移动 一个file1文件到dir1目录中</span><br><span class="line"><span class="meta">#</span><span class="bash"> mv file1 dir1</span></span><br><span class="line"></span><br><span class="line">重命名文件</span><br><span class="line"><span class="meta">#</span><span class="bash"> mv file1 file2</span></span><br><span class="line"></span><br><span class="line">如果存在dir2：移动 一个dir1目录到dir2目录中/如果dir2不存在：重命名dir1</span><br><span class="line"><span class="meta">#</span><span class="bash"> mv dir1 dir2</span></span><br></pre></td></tr></table></figure>
<p><span id="cp"><strong>cp</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-a：复制目录时使用，保留链接、文件属性，并复制目录下的所有内容。dpR </li>
<li>-d：复制时保留链接。</li>
<li>-f：覆盖已经存在的目标文件而不给出提示。</li>
<li>-i：覆盖目标文件之前给出提示，</li>
<li>-p：除复制文件的内容外，还把修改时间和访问权限也复制到新文件中。</li>
<li>-r：若文件是一个目录文件，将复制该目录下所有的子目录和文件。</li>
<li>-l：不复制文件，只是生成链接文件。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">复制file1文件，改名为file2</span><br><span class="line"><span class="meta">#</span><span class="bash"> cp file1 file2   </span></span><br><span class="line"></span><br><span class="line">复制dir目录下的所有文件到当前工作目录</span><br><span class="line"><span class="meta">#</span><span class="bash"> cp dir/* .   </span></span><br><span class="line"></span><br><span class="line">复制dir1目录到当前工作目录</span><br><span class="line"><span class="meta">#</span><span class="bash"> cp -a /tmp/dir1 .   </span></span><br><span class="line"></span><br><span class="line">复制一个目录</span><br><span class="line"><span class="meta">#</span><span class="bash"> cp -a dir1 dir2</span></span><br></pre></td></tr></table></figure>
<p><span id="touch"><strong>touch</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>a 改变文件的读取时间记录。</li>
<li>m 改变文件的修改时间记录。</li>
<li>c 假如文件不存在，不会建立新的文件。</li>
<li>d 设定时间与日期，可以使用各种不同的格式。</li>
<li>t 设定文件的时间记录，格式与 date 指令相同。</li>
<li>–no-create 不会建立新文件。</li>
<li>–help 列出指令格式。</li>
<li>–version 列出版本讯息。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">如果文件不存在则创建文件file1 / 存在则表示修改文件的时间属性为当前系统时间</span><br><span class="line"><span class="meta">#</span><span class="bash"> touch file1</span></span><br><span class="line"></span><br><span class="line">修改一个文件或目录的时间戳 - (YYMMDDhhmm)</span><br><span class="line"><span class="meta">#</span><span class="bash"> touch -t 0712250000 file1</span></span><br></pre></td></tr></table></figure>
<p><span id="cat"><strong>cat</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-n ：由 1 开始对所有输出的行数编号。</li>
<li>-b：和 -n 相似，只不过对于空白行不编号。</li>
<li>-s：当遇到有连续两行以上的空白行，就代换为一行的空白行。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">把 file1 的内容加上行号后覆盖在file2文档里</span><br><span class="line"><span class="meta">#</span><span class="bash"> cat -n file1 &gt; file2</span></span><br></pre></td></tr></table></figure>
<p><span id="more"><strong>more</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-num 一次显示的行数</li>
<li>-d 提示使用者，在画面下方显示 [Press space to continue, ‘q’ to quit.] ，如果使用者按错键，则会显示 [Press ‘h’ for instructions.] 而不是 ‘哔’ 声</li>
<li>-f 计算行数时，以实际上的行数，而非自动换行过后的行数（有些单行字数太长的会被扩展为两行或两行以上）</li>
<li>-p 不以卷动的方式显示每一页，而是先清除萤幕后再显示内容</li>
<li>-c 跟 -p 相似，不同的是先显示内容再清除其他旧资料</li>
<li>-s 当遇到有连续两行以上的空白行，就代换为一行的空白行</li>
<li>+/pattern 在每个文档显示前搜寻该字串（pattern），然后从该字串之后开始显示</li>
<li>+num 从第 num 行开始显示</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">显示文件file1</span><br><span class="line"><span class="meta">#</span><span class="bash"> more file1</span></span><br><span class="line"></span><br><span class="line">逐页显示 testfile 文档内容，如有连续两行以上空白行则以一行空白行显示。</span><br><span class="line"><span class="meta">#</span><span class="bash"> more -s testfile</span></span><br><span class="line"></span><br><span class="line">从第 20 行开始显示 testfile 之文档内容</span><br><span class="line"><span class="meta">#</span><span class="bash"> more +20 testfile</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>常用操作命令</strong></p>
</blockquote>
<ul>
<li>Enter 向下n行，需要定义。默认为1行</li>
<li>Ctrl+F 向下滚动一屏</li>
<li>空格键 向下滚动一屏</li>
<li>Ctrl+B 返回上一屏</li>
<li>= 输出当前行的行号</li>
<li>：f 输出文件名和当前行的行号</li>
<li>V 调用vi编辑器</li>
<li>!命令 调用Shell，并执行命令</li>
<li>q 退出more</li>
</ul>
<p><span id="less"><strong>less</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>–b &lt;缓冲区大小&gt; 设置缓冲区的大小</li>
<li>-e 当文件显示结束后，自动离开</li>
<li>-f 强迫打开特殊文件，例如外围设备代号、目录和二进制文件</li>
<li>-g 只标志最后搜索的关键词</li>
<li>-i 忽略搜索时的大小写</li>
<li>-m 显示类似more命令的百分比</li>
<li>-N 显示每行的行号</li>
<li>-o &lt;文件名&gt; 将less 输出的内容在指定文件中保存起来</li>
<li>-Q 不使用警告音</li>
<li>-s 显示连续空行为一行</li>
<li>-S 行过长时间将超出部分舍弃</li>
<li>-x &lt;数字&gt; 将”tab”键显示为规定的数字空格</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查看文件</span><br><span class="line"><span class="meta">#</span><span class="bash"> less file1</span></span><br><span class="line"></span><br><span class="line">ps查看进程信息并通过less分页显示</span><br><span class="line"><span class="meta">#</span><span class="bash"> ps -ef |less</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p> <strong>附加备注</strong></p>
</blockquote>
<p>1.全屏导航</p>
<ul>
<li>ctrl + F - 向前移动一屏</li>
<li>ctrl + B - 向后移动一屏</li>
<li>ctrl + D - 向前移动半屏</li>
<li>ctrl + U - 向后移动半屏</li>
</ul>
<p>2.单行导航</p>
<ul>
<li>j - 向前移动一行</li>
<li>k - 向后移动一行</li>
</ul>
<p>3.其它导航</p>
<ul>
<li>G - 移动到最后一行</li>
<li>g - 移动到第一行</li>
<li>q / ZZ - 退出 less 命令</li>
</ul>
<p>4.其它有用的命令</p>
<ul>
<li>v - 使用配置的编辑器编辑当前文件</li>
<li>h - 显示 less 的帮助文档</li>
<li>&amp;pattern - 仅显示匹配模式的行，而不是整个文件</li>
</ul>
<p>5.标记导航</p>
<p>当使用 less 查看大文件时，可以在任何一个位置作标记，可以通过命令导航到标有特定标记的文本位置：</p>
<ul>
<li>ma - 使用 a 标记文本的当前位置</li>
<li>‘a - 导航到标记 a 处</li>
</ul>
<p><span id="ln"><strong>ln</strong></span></p>
<blockquote>
<p><strong>必要参数</strong>：</p>
</blockquote>
<ul>
<li>-b 删除，覆盖以前建立的链接</li>
<li>-d 允许超级用户制作目录的硬链接</li>
<li>-f 强制执行</li>
<li>-i 交互模式，文件存在则提示用户是否覆盖</li>
<li>-n 把符号链接视为一般目录</li>
<li>-s 软链接(符号链接)</li>
<li>-v 显示详细的处理过程</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">创建一个名叫linkToRoot的软连接 链接到/root目录</span><br><span class="line"><span class="meta">#</span><span class="bash"> ln -s /root linkToRoot</span></span><br></pre></td></tr></table></figure>
<p><span id="chown"><strong>chown</strong></span></p>
<blockquote>
<p><strong>语法</strong>：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown [-cfhvR] [--help] [--version] user[:group] file</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>必要参数</strong>：</p>
</blockquote>
<ul>
<li>user : 新的文件拥有者的使用者 ID</li>
<li>group : 新的文件拥有者的使用者组(group)</li>
<li>file：文件名</li>
<li>-c : 显示更改的部分的信息</li>
<li>-f : 忽略错误信息</li>
<li>-h :修复符号链接</li>
<li>-v : 显示详细的处理信息</li>
<li>-R : 处理指定目录以及其子目录下的所有文件</li>
<li>–help : 显示辅助说明</li>
<li>–version : 显示版本</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">使用root创建一个文件apple.txt，然后将其所有者修改成Tom</span><br><span class="line"><span class="meta">#</span><span class="bash"> chown tom apple.txt</span></span><br><span class="line"></span><br><span class="line">将/home/kkk目录下所有目录文件的所有者修改成tom</span><br><span class="line"><span class="meta">#</span><span class="bash"> chown -R tom kkk/</span></span><br><span class="line"></span><br><span class="line">将/home/kkk目录下所有目录文件的所有者修改成tom,所在组改成bandit</span><br><span class="line"><span class="meta">#</span><span class="bash"> chown -R tom:bandit kkk/</span></span><br></pre></td></tr></table></figure>
<p><span id="chgrp"><strong>chgrp</strong></span></p>
<blockquote>
<p><strong>语法</strong>：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chgrp [-cfhRv][--help][--version] group file</span><br><span class="line"></span><br><span class="line">chgrp [-cfhRv][--help][--reference=&lt;参考文件或目录&gt;][--version] file</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>必要参数</strong>：</p>
</blockquote>
<ul>
<li>-c    效果类似”-v”参数，但仅回报更改的部分。</li>
<li>-f    不显示错误信息。</li>
<li>-h    只对符号连接的文件作修改，而不更动其他任何相关文件。</li>
<li>-R 　递归处理，将指定目录下的所有文件及子目录一并处理。</li>
<li>-v 　显示指令执行过程。</li>
<li>–help 　在线帮助。</li>
<li>–reference=&lt;参考文件或目录&gt; 　把指定文件或目录的所属群组全部设成和参考文件或目录的所属群组相同。</li>
<li>–version 　显示版本信息</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用root创建一个文件orange.txt，然后将其所在组改为police</span><br><span class="line"><span class="meta">#</span><span class="bash"> chgrp police orange.txt</span></span><br><span class="line"></span><br><span class="line">将/home/kkk目录下所有目录文件的所有者修改成tom</span><br><span class="line"><span class="meta">#</span><span class="bash"> chgrp -R bandit kkk/</span></span><br></pre></td></tr></table></figure>
<p><span id="chmod"><strong>chmod</strong></span></p>
<blockquote>
<p><strong>语法</strong>：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod [-cfvR] [--help] [--version] mode file</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>mode</strong>：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ugoa...][[+-=][rwxX]...][,...]</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>ugoa</strong><ul>
<li>u 表示该文件的拥有者</li>
<li>g 表示属于同一个群体(group)者</li>
<li>o 表示其他以外的人</li>
<li>a 表示这三者皆是。</li>
</ul>
</li>
<li><strong>+-=</strong><ul>
<li>+ 表示增加权限</li>
<li>- 表示取消权限</li>
<li>= 表示唯一设定权限。</li>
</ul>
</li>
<li><strong>rwxX</strong><ul>
<li>r 表示可读取</li>
<li>w 表示可写入</li>
<li>x 表示可执行</li>
<li>X 表示只有当该文件是个子目录或者该文件已经被设定过为可执行。</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>其他参数</strong> :</p>
</blockquote>
<ul>
<li>-c : 若该文件权限确实已经更改，才显示其更改动作</li>
<li>-f : 若该文件权限无法被更改也不要显示错误讯息</li>
<li>-v : 显示权限变更的详细资料</li>
<li>-R : 对目前目录下的所有文件与子目录进行相同的权限变更(即以递回的方式逐个变更)</li>
<li>–help : 显示辅助说明</li>
<li>–version : 显示版本</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">给abc文件的所有者读写执行的权限，给所在组读执行权限，给其他组读执行权限</span><br><span class="line"><span class="meta">#</span><span class="bash"> chmod u=rwx,g=rx,o=rx abc</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> chmod 755 abc</span></span><br><span class="line"></span><br><span class="line">给abc文件的所有者除去执行的权限，增加组写的权限</span><br><span class="line"><span class="meta">#</span><span class="bash"> chmod u-x,g+w abc</span></span><br><span class="line"></span><br><span class="line">给abc文件的所有用户添加读的权限</span><br><span class="line"><span class="meta">#</span><span class="bash"> chmod a+r abc</span></span><br></pre></td></tr></table></figure>
<h3 id="时间日期"><a href="#时间日期" class="headerlink" title="时间日期"></a>时间日期</h3><table>
<thead>
<tr>
<th>指令格式</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><a href="#date">date</a></strong></td>
<td>显示或设定系统的日期与时间</td>
</tr>
<tr>
<td><strong><a href="#cal">cal</a></strong></td>
<td>显示日历</td>
</tr>
</tbody>
</table>
<p><span id="date"><strong>date</strong></span></p>
<blockquote>
<p><strong>日期</strong>：</p>
</blockquote>
<ul>
<li>%a : 星期几 (Sun~Sat)</li>
<li>%A : 星期几 (Sunday ~Saturday)</li>
<li>%b : 月份 (Jan~Dec)</li>
<li>%B : 月份 (January..December)</li>
<li>%c : 直接显示日期与时间</li>
<li>%d : 日 (01~31)</li>
<li>%D : 直接显示日期 (mm/dd/yy)</li>
<li>%h : 同 %b</li>
<li>%j : 一年中的第几天 (001..366)</li>
<li>%m : 月份 (01..12)</li>
<li>%U : 一年中的第几周 (00..53) (以 Sunday 为一周的第一天的情形)</li>
<li>%w : 一周中的第几天 (0..6)</li>
<li>%W : 一年中的第几周 (00..53) (以 Monday 为一周的第一天的情形)</li>
<li>%x : 直接显示日期 (mm/dd/yy)</li>
<li>%y : 年份的最后两位数字 (00~99)</li>
<li>%Y : 完整年份 (0000~9999)</li>
</ul>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-d datestr : 显示 datestr 中所设定的时间 (非系统时间)</li>
<li>–help : 显示辅助讯息</li>
<li>-s datestr : 将系统时间设为 datestr 中所设定的时间</li>
<li>-u : 显示目前的格林威治时间</li>
<li>–version : 显示版本编号</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">2019年 01月 27日 星期日 17:45:13 CST</span><br><span class="line"><span class="meta">#</span><span class="bash"> date</span></span><br><span class="line"></span><br><span class="line">2019年01月27日 星期日 17时46分41秒</span><br><span class="line"><span class="meta">#</span><span class="bash"> date <span class="string">"+%c"</span> </span></span><br><span class="line"></span><br><span class="line">01/27/19</span><br><span class="line"><span class="meta">#</span><span class="bash"> date <span class="string">"+%D"</span></span></span><br><span class="line"></span><br><span class="line">17:50:41</span><br><span class="line"><span class="meta">#</span><span class="bash"> date <span class="string">"+%T"</span></span></span><br><span class="line"></span><br><span class="line">按自己的格式输出 </span><br><span class="line">2019-01-27 17:56:20</span><br><span class="line"><span class="meta">#</span><span class="bash"> date <span class="string">"+%Y-%m-%d %H:%M:%S"</span></span></span><br><span class="line"></span><br><span class="line">设置时间</span><br><span class="line">2019年 10月 10日 星期日 11:22:22 CST</span><br><span class="line"><span class="meta">#</span><span class="bash">date -s <span class="string">"2019-10-10 11:22:22"</span></span></span><br></pre></td></tr></table></figure>
<p><span id="cal"><strong>cal</strong></span></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">显示当前月的日历</span><br><span class="line"><span class="meta">#</span><span class="bash"> cal</span></span><br><span class="line"></span><br><span class="line">显示2020年的日历</span><br><span class="line"><span class="meta">#</span><span class="bash"> cal 2020</span></span><br></pre></td></tr></table></figure>
<h3 id="搜索查找"><a href="#搜索查找" class="headerlink" title="搜索查找"></a>搜索查找</h3><table>
<thead>
<tr>
<th>指令格式</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><a href="#find">find</a></strong></td>
<td>在指定目录下查找文件</td>
</tr>
<tr>
<td><strong><a href="#locate">locate</a></strong></td>
<td>查找符合条件的文档，快速定位</td>
</tr>
<tr>
<td><strong><a href="#grep">grep</a></strong></td>
<td>用于查找文件里符合条件的字符串</td>
</tr>
</tbody>
</table>
<p><span id="find"><strong>find</strong></span></p>
<blockquote>
<p><strong>语法</strong></p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find path -option [-print] [-exec -ok command ] &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>option</strong>：</p>
</blockquote>
<ul>
<li>-<strong>name</strong> 按照指定的文件名查找模式查找文件</li>
<li><strong>-user</strong> 查找属于指定用户名所有文件</li>
<li><strong>-size</strong> 按照指定的文件大小查找文件</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">根据名称查找/home目录下的hello.txt文件</span><br><span class="line"><span class="meta">#</span><span class="bash"> find /home -name <span class="string">"hello.txt"</span></span></span><br><span class="line">将目前目录及其子目录下所有延伸档名是txt的文件列出来</span><br><span class="line"><span class="meta">#</span><span class="bash"> find . -name <span class="string">"*.txt"</span></span></span><br><span class="line"></span><br><span class="line">查找/home目录下，属于用户名为zsx的文件</span><br><span class="line"><span class="meta">#</span><span class="bash"> find /home -user zsx</span></span><br><span class="line"></span><br><span class="line">查找整个linux系统下大雨20m的文件（+n大于 -n小于 n等于）</span><br><span class="line"><span class="meta">#</span><span class="bash"> find / -size +20M</span></span><br></pre></td></tr></table></figure>
<p><span id="locate"><strong>locate</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-d或–database= 配置locate指令使用的数据库。locate指令预设的数据库位于/var/lib/slocate目录里，文档名为slocate.db，您可使用 这个参数另行指定。</li>
<li>–help 　在线帮助。</li>
<li>–version 　显示版本信息。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">创建locate数据库</span><br><span class="line"><span class="meta">#</span><span class="bash"> updatedb</span></span><br><span class="line"></span><br><span class="line">查询文件或目录</span><br><span class="line"><span class="meta">#</span><span class="bash"> locate file1/dir1</span></span><br><span class="line"></span><br><span class="line">手工升级数据库 </span><br><span class="line"><span class="meta">#</span><span class="bash"> locate -u</span></span><br></pre></td></tr></table></figure>
<p><span id="grep"><strong>grep</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-n  : 在显示符合样式的那一行之前，标示出该行的列数编号。</li>
<li>-i :忽略字母大小写</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">在file1中，查找“yes”所在行，显示行号</span><br><span class="line"><span class="meta">#</span><span class="bash"> cat file1 | grep -n yes</span></span><br><span class="line"></span><br><span class="line">在file1中，查找“yes”所在行，忽略字母大小写</span><br><span class="line"><span class="meta">#</span><span class="bash"> cat file1 | grep -i yes</span></span><br><span class="line"></span><br><span class="line">统计/home文件夹下文件的个数</span><br><span class="line"><span class="meta">#</span><span class="bash"> ls -l /home | grep <span class="string">"^-"</span> | wc -l</span></span><br><span class="line"></span><br><span class="line">统计/home文件夹下目录的个数</span><br><span class="line"><span class="meta">#</span><span class="bash"> ls -l /home | grep <span class="string">"^d"</span> | wc -l</span></span><br><span class="line"></span><br><span class="line">统计/home文件夹下文件的个数，包括子文件夹里的</span><br><span class="line"><span class="meta">#</span><span class="bash"> ls -lR /home | grep <span class="string">"^-"</span> | wc -l</span></span><br></pre></td></tr></table></figure>
<h3 id="备份压缩"><a href="#备份压缩" class="headerlink" title="备份压缩"></a>备份压缩</h3><table>
<thead>
<tr>
<th>指令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><a href="#gzip">gzip</a></strong></td>
<td>压缩文件，压缩成”*.gz”文件,压缩后不会保留原文件</td>
</tr>
<tr>
<td><strong><a href="#gzip">gunzip</a></strong></td>
<td>解压文件，解压”*.gz”文件</td>
</tr>
<tr>
<td><strong><a href="#zip">zip</a></strong></td>
<td>压缩文件，压缩成”*.gz”文件,压缩后不会保留原文件</td>
</tr>
<tr>
<td><strong><a href="#zip">unzip</a></strong></td>
<td>解压文件，解压”*.gz”文件</td>
</tr>
<tr>
<td><strong><a href="#tar">tar</a></strong></td>
<td>打包指令，既可以压缩也可以解压</td>
</tr>
</tbody>
</table>
<p><span id="gzip"><strong>gzip</strong> /<strong>gunzip</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-v　显示指令执行过程。</li>
<li>-l　列出压缩文件的相关信息。</li>
<li>-r   递归处理，将指定目录下的所有文件及子目录一并处理。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">压缩目录下的所有文件</span><br><span class="line"><span class="meta">#</span><span class="bash"> gzip *</span></span><br><span class="line"></span><br><span class="line">显示压缩文件的信息</span><br><span class="line"><span class="meta">#</span><span class="bash"> gzip -l a.gz</span></span><br><span class="line"></span><br><span class="line">解压gz文件</span><br><span class="line"><span class="meta">#</span><span class="bash"> gunzip a.gz</span></span><br></pre></td></tr></table></figure>
<p><span id="zip"><strong>zip</strong> /<strong>unzip</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-r  递归处理，将指定目录下的所有文件和子目录一并处理 </li>
<li>-d&lt;目录&gt; 指定文件解压缩后所要存储的目录。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">将/home下所有文件进行压缩成mypackage.zip</span><br><span class="line"><span class="meta">#</span><span class="bash"> zip -r mypackage.zip /home/</span></span><br><span class="line"></span><br><span class="line">将mypackage解压到/opt/tmp目录下</span><br><span class="line"><span class="meta">#</span><span class="bash"> unzip -d /opt/tmp/ mypackage.zip</span></span><br></pre></td></tr></table></figure>
<p><span id="tar"><strong>tar</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-c  产生.tar打包文件</li>
<li>-v 显示详细信息</li>
<li>-f 制定压缩后的文件名</li>
<li>-z 打包同时压缩</li>
<li>-x 解包.tar文件</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">压缩多个文件 将/zsx/file1.txt和/zsx/file2.txt压缩成a.tar.gz</span><br><span class="line">源文件保留</span><br><span class="line"><span class="meta">#</span><span class="bash"> tar -zcvf a.tar.gz file1.txt file2.txt</span></span><br><span class="line"></span><br><span class="line">将/zsx下所有文件 压缩成myzsx.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash"> tar -zcvf myzsx.tar.gz /home/zsx/</span></span><br><span class="line"></span><br><span class="line">将a.tar.gz解压到当前目录</span><br><span class="line"><span class="meta">#</span><span class="bash"> tar -zxvf a.tar.gz</span></span><br><span class="line"></span><br><span class="line">将a.tar.gz解压到 /home/zsx/a</span><br><span class="line"><span class="meta">#</span><span class="bash"> tar -zxvf a.tar.gz -C /home/zsx/a</span></span><br></pre></td></tr></table></figure>
<h3 id="分区磁盘"><a href="#分区磁盘" class="headerlink" title="分区磁盘"></a>分区磁盘</h3><table>
<thead>
<tr>
<th>指令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#crond"><strong>crontab</strong></a></td>
<td>任务调度相关</td>
</tr>
<tr>
<td><strong>lsblk -f</strong></td>
<td>查看系统的分区和挂载情况</td>
</tr>
<tr>
<td><strong>mount / umount</strong></td>
<td>挂载与断开</td>
</tr>
<tr>
<td><strong>df -h</strong></td>
<td>查询系统整体磁盘使用情况</td>
</tr>
<tr>
<td><a href="#du"><strong>du -h</strong></a></td>
<td>查询指定目录的磁盘占用情况 默认为当前目录</td>
</tr>
</tbody>
</table>
<p><span id="df"> <strong>df</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-h 带计量单位</li>
<li>-a 含文件</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">通常</span><br><span class="line"><span class="meta">#</span><span class="bash"> df -h</span></span><br></pre></td></tr></table></figure>
<p><span id="du"> <strong>du</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-s 指定目录占用大小汇总</li>
<li>-h 带计量单位</li>
<li>-a 含文件</li>
<li>–max-depth=1  子目录深度</li>
<li>-c  列出明细的同时，增加汇总值</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">通常</span><br><span class="line"><span class="meta">#</span><span class="bash"> du -h</span></span><br><span class="line"></span><br><span class="line">查询/opt目录的磁盘占用情况，深度为1</span><br><span class="line"><span class="meta">#</span><span class="bash"> du -ach --max-depth=1 /opt</span></span><br></pre></td></tr></table></figure>
<h3 id="进程服务"><a href="#进程服务" class="headerlink" title="进程服务"></a>进程服务</h3><table>
<thead>
<tr>
<th>指令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#ps"><strong>ps</strong></a></td>
<td>查看目前系统中，有哪些正在执行，以及他们执行状况</td>
</tr>
<tr>
<td><a href="#pstree"><strong>pstree</strong></a></td>
<td>可以更加直观的看进程信息</td>
</tr>
<tr>
<td><strong><a href="#top">top</a></strong></td>
<td>动态查看进程</td>
</tr>
<tr>
<td><strong><a href="#netstat">netstat</a></strong></td>
<td>查看系统网络情况</td>
</tr>
<tr>
<td><a href="#kill"><strong>kill</strong></a></td>
<td>通过进程号终止进程</td>
</tr>
<tr>
<td><strong>killall</strong></td>
<td>通过进程名称杀死进程，支持通配符</td>
</tr>
<tr>
<td><strong><a href="#service">service</a></strong></td>
<td>服务管理</td>
</tr>
</tbody>
</table>
<p><span id="ps"> <strong>ps</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-a: 显示当前终端的所有进程信息</li>
<li>-u: 以用户的格式显示进程信息</li>
<li>-x: 显示后台进程运行的参数</li>
<li>-e : 显示所有进程</li>
<li>-f : 全格式</li>
<li>PID: pid，进程识别号</li>
<li>TTY: 终端的机号</li>
<li>TIME: 此进程所消耗CPU时间</li>
<li>CMD: 正在执行的命令或进程名</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">通常</span><br><span class="line"><span class="meta">#</span><span class="bash"> ps -aux</span></span><br><span class="line"></span><br><span class="line">查看有没有ssd服务</span><br><span class="line"><span class="meta">#</span><span class="bash"> ps -aux | grep sshd</span></span><br><span class="line"></span><br><span class="line">查看指令的父进程</span><br><span class="line"><span class="meta">#</span><span class="bash"> ps -ef | more</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>显示</p>
</blockquote>
<p><img src="/images/201.jpg" alt="201"></p>
<blockquote>
<p>指令说明：</p>
</blockquote>
<ul>
<li><strong>System V  展示风格</strong></li>
<li>USER：用户名称</li>
<li>PID：进程号</li>
<li>PPID：父进程 （0为没有父进程）</li>
<li>%CPU：进程占用CPU的百分比</li>
<li>%MEN：进程占用物理内存的百分比</li>
<li>VSZ：进程占用的虚拟内存大小 (KB)</li>
<li>RSS：进程占用的物理内存大小 (KB)</li>
<li>TTY：终端名称，缩写</li>
<li>STAT：进程状态，S-睡眠，s-表示该进程是会话的先导进程，N-表示进程拥有比普通优先级更低的优先级，R-正在运行，D-短期等待，Z-僵死进程，T-被跟踪或者被停止等等</li>
<li>START：进程的启动时间</li>
<li>TIME：CPU时间，即进程使用CPU的总时间</li>
<li>COMMAND：启动进程所用的命令和参数，如果过长会被截断显示</li>
</ul>
<p><span id="pstree"> <strong>pstree</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-p：显示进程的PID</li>
<li>-u：显示进程所属用户</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">以树状的形式显示进程的pid</span><br><span class="line"><span class="comment"># pstree -p</span></span><br><span class="line"></span><br><span class="line">以树状的形式显示进程的用户id</span><br><span class="line"><span class="comment"># pstree -u</span></span><br></pre></td></tr></table></figure>
<p><span id="top"><strong>top</strong></span></p>
<p>与ps很相似。他们都是用来显示正在执行的进程。top在执行一段时间可以更新正在运行的进程</p>
<blockquote>
<p>基本语法</p>
</blockquote>
<p>top [选项]</p>
<blockquote>
<p>选项</p>
</blockquote>
<ul>
<li>-d 秒数  指定top命令每隔几秒更新，默认是3秒在top命令的交互模式当中可以执行的命令</li>
<li>-l  使top不显示任何限制或者死循环</li>
<li>-p  通过制定监控进程ID来仅仅监控某个进程的状态</li>
</ul>
<blockquote>
<p>交互操作说明</p>
</blockquote>
<ul>
<li>P  以CPU使用率排序，默认就是此选项</li>
<li>M  以内存的使用率排序</li>
<li>N  以PID排序</li>
<li>q   退出top</li>
<li>u   监视特定用户</li>
<li>k   终止指定的进程</li>
</ul>
<blockquote>
<p>【例1】监视特定用户</p>
</blockquote>
<ol>
<li>输入top</li>
</ol>
<p><img src="/images/208.jpg" alt="208"></p>
<ol>
<li>输入u指定特定用户 ，输入用户名root</li>
</ol>
<p><img src="/images/210.jpg" alt="210"></p>
<blockquote>
<p>【例2】终止指定的进程</p>
</blockquote>
<ol>
<li>输入top</li>
<li>输入k，指定需要杀死的进程</li>
</ol>
<p><img src="/images/209.jpg" alt="209"></p>
<blockquote>
<p>【例3】指定系统状态更新时间（每隔10秒自动更新）</p>
</blockquote>
<ol>
<li>输入top -d 10</li>
</ol>
<p><img src="/images/209.jpg" alt="209"></p>
<p><span id="netstat"><strong>netstat</strong></span> </p>
<blockquote>
<p>语法</p>
</blockquote>
<p>netstat [选项]</p>
<blockquote>
<p>选项</p>
</blockquote>
<ul>
<li>-an  按一定瞬息排列输出</li>
<li>-p 显示哪个进程在调用</li>
</ul>
<blockquote>
<p>【例1】监视特定用户</p>
</blockquote>
<p><span id="service"> <strong>service</strong></span></p>
<blockquote>
<p>语法</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> service 服务名 [start|stop|restart|reload|status]</span></span><br><span class="line"></span><br><span class="line">在centOS7以后不再使用service 而是改为systemctl</span><br></pre></td></tr></table></figure>
<blockquote>
<p>【例】查看当前防火墙的状况，关闭防火墙和重启防火墙</p>
</blockquote>
<ol>
<li><p>查看防火墙状态：service iptables status</p>
<p>centOS7:  systemctl status firewalld （active为开启，dead为关闭）</p>
</li>
<li><p>关闭防火墙：service iptables stop</p>
<p>centOS7:  systemctl stop firewalld</p>
</li>
<li><p>开启防火墙：service iptables start</p>
<p>centOS7:  systemctl start firewalld</p>
</li>
</ol>
<blockquote>
<p>注意：以上关闭或启用防火墙为临时生效，系统重启后还是回归以前的设置</p>
<p>若要自启动或关闭永久生效，要使用<a href="#chkconfig">chkconfig</a>指令，或进入<a href="#fuwuguanli">服务管理</a>关闭</p>
</blockquote>
<p><span id="kill"> <strong>kill / killall</strong></span></p>
<blockquote>
<p><strong>参数</strong>：</p>
</blockquote>
<ul>
<li>-l &lt;信息编号&gt; 　若不加&lt;信息编号&gt;选项，则-l参数会列出全部的信息名称。</li>
<li>-s &lt;信息名称或编号&gt; 　指定要送出的信息。</li>
<li>-9  强制杀死进程</li>
</ul>
<blockquote>
<p>【例1】踢掉某个非法用户</p>
</blockquote>
<p>查看进程：ps -aux |grep sshd</p>
<p><img src="/images/202.jpg" alt="202"></p>
<p>踢除进程：kill 3692</p>
<blockquote>
<p>【例2】终止远程登录服务sshd，在适当时候再次重启sshd服务</p>
</blockquote>
<p>查看sshd服务的进程号：为上图2385</p>
<p>终止进程：kill 2385</p>
<blockquote>
<p>【例3】终止多个gedit编辑器 </p>
</blockquote>
<p>终止进程：killall gedit</p>
<blockquote>
<p>【例4】强制终止一个终端</p>
</blockquote>
<p>查看终端：ps -aux | grep bash</p>
<p><img src="/images/203.jpg" alt="203"></p>
<p>终止终端：kill -9 3842</p>
<h3 id="网络通讯"><a href="#网络通讯" class="headerlink" title="网络通讯"></a>网络通讯</h3><table>
<thead>
<tr>
<th>指令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><a href="#telnet">telnet</a></strong></td>
<td>检查linux的某个端口是否在监听，并且可以访问</td>
</tr>
<tr>
<td><strong><a href="#netstat">netstat</a></strong></td>
<td>得知整个Linux系统的网络情况</td>
</tr>
<tr>
<td>service network restart</td>
<td>重启网络</td>
</tr>
</tbody>
</table>
<p><span id="telnet"><strong>telnet</strong></span></p>
<blockquote>
<p>语法</p>
</blockquote>
<p><strong>telnet ip 端口</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">检查22端口是否在监听</span><br><span class="line"><span class="meta">#</span><span class="bash"> telnet ip 22</span></span><br></pre></td></tr></table></figure>
<p><span id="netstat"><strong>netstat</strong></span></p>
<blockquote>
<p>语法</p>
</blockquote>
<p><strong>netstat [选项]</strong></p>
<blockquote>
<p>选项说明</p>
</blockquote>
<ul>
<li>-an    按一定顺序排列输出</li>
<li>-p     显示哪个进程在调用</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查看系统所有的网络服务</span><br><span class="line"><span class="meta">#</span><span class="bash"> netstat -anp</span></span><br><span class="line"></span><br><span class="line">查看服务名为sshd的服务的信息</span><br><span class="line"><span class="meta">#</span><span class="bash"> netstat -anp | grep sshd</span></span><br></pre></td></tr></table></figure>
<h2 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h2><h3 id="crond任务调度"><a href="#crond任务调度" class="headerlink" title="crond任务调度"></a>crond任务调度</h3><blockquote>
<ol>
<li>如果只是简单的任务，可以不用写脚本，直接在crontab中加入即可</li>
<li>对于比较复杂的任务，需要些脚本完成(shell)编程</li>
</ol>
</blockquote>
<ul>
<li>设置任务调度文件：/etc/crontab</li>
<li>设置个人任务调度。执行crontab -e命令</li>
<li>接着输入任务到调度文件</li>
</ul>
<p>如： <em>/1 </em> <em> </em> * ls -l /etc/ &gt;&gt; /tmp/to.txt </p>
<p>意思是说每小时的每分钟执行 ls -l /etc/ &gt;&gt; /tmp/to.txt</p>
<blockquote>
<p>占位符说明：</p>
</blockquote>
<table>
<thead>
<tr>
<th>项目</th>
<th>含义</th>
<th>范围</th>
</tr>
</thead>
<tbody>
<tr>
<td>第一个*</td>
<td>一小时当中的第几分钟</td>
<td>0-59</td>
</tr>
<tr>
<td>第二个*</td>
<td>一天当中的第几小时</td>
<td>0-23</td>
</tr>
<tr>
<td>第三个*</td>
<td>一个月当中的第几天</td>
<td>1-31</td>
</tr>
<tr>
<td>第四个*</td>
<td>一年当中的第几个月</td>
<td>1-12</td>
</tr>
<tr>
<td>第五个*</td>
<td>一周当中的星期几</td>
<td>0-7（0和7都表示周日）</td>
</tr>
</tbody>
</table>
<blockquote>
<p>特殊符号说明：</p>
</blockquote>
<table>
<thead>
<tr>
<th>特殊符号</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>*</strong></td>
<td>代表任何时间。比如第一个*就代表一小时中每分钟都执行一次的意思</td>
</tr>
<tr>
<td><strong>，</strong></td>
<td>代表不连续的时间。比如”0 8,12,16 <em> </em> * 命令”，就代表在每天的8:00，12:00，16:00都执行命令</td>
</tr>
<tr>
<td><strong>-</strong></td>
<td>代表连续的时间范围。比如”0 5 <em> </em> 1-6 命令”，代表在周一到周六的凌晨5:00执行任务</td>
</tr>
<tr>
<td><strong>*/n</strong></td>
<td>代表每个多久执行一次。比如”<em>/10 </em> <em> </em> * 命令”，代表每个10分钟就执行一次命令</td>
</tr>
</tbody>
</table>
<blockquote>
<p>特定时间执行案例：</p>
</blockquote>
<table>
<thead>
<tr>
<th>时间</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>45 22 <em> </em> * 命令</td>
<td>在22点45分执行命令</td>
</tr>
<tr>
<td>0 17 <em> </em> 1 命令</td>
<td>在每周一的17:00执行命令</td>
</tr>
<tr>
<td>0 5 1,15 <em> </em> 命令</td>
<td>每月的1号和15号的凌晨5点执行命令</td>
</tr>
<tr>
<td>40 4 <em> </em> 1-5 命令</td>
<td>每周一到周五的凌晨4:40执行命令</td>
</tr>
<tr>
<td><em>/10 4 </em> <em> </em> 命令</td>
<td>每天凌晨4点，每个10分钟执行一次命令</td>
</tr>
<tr>
<td>0 0 1,15 * 1 命令</td>
<td>每月1号和15号，每周一的0:00都会执行命令</td>
</tr>
</tbody>
</table>
<blockquote>
<p><span id="crond">crond相关指令：</span></p>
</blockquote>
<ul>
<li>crontab -r  终止任务调度</li>
<li>crontab -l  列出当前有哪些任务调度</li>
<li>service crond restart 重启任务调度</li>
</ul>
<h2 id="Linux分区"><a href="#Linux分区" class="headerlink" title="Linux分区"></a>Linux分区</h2><h3 id="硬盘说明"><a href="#硬盘说明" class="headerlink" title="硬盘说明"></a>硬盘说明</h3><ul>
<li><p>Linux硬盘分为<strong>IDE硬盘</strong>和<strong>SCSI硬盘</strong>，目前基本是SCSI硬盘</p>
</li>
<li><p>对于<strong>IDE硬盘</strong>，驱动器标识符为 “<strong>hdx~</strong>”：</p>
<ol>
<li>其中”<strong>hd</strong>“表明所在设备为<strong>IDE硬盘</strong></li>
<li>“<strong>x</strong>“表示盘号（a为基本盘，b为基本从属盘，c为辅助主盘，d为辅助从属盘）</li>
<li>“<strong>~</strong>“ 代表分区，前四个分区用数字1到4表示，他们是主分区或者扩展分区，从5开始就是逻辑分区。</li>
</ol>
<p>例，<strong>hda3</strong>表示为第一个IDE硬盘上的第三个主分区或扩展分区</p>
</li>
<li><p><strong>对于SCSI硬盘</strong>，则标识为”<strong>sdx~</strong>“，“<strong>sd</strong>”用来表示分区所在设备的类型，其余与IDE硬盘表示方法一样</p>
</li>
<li><strong>lsblk -f</strong> 命令，用来查看系统的分区和挂载情况</li>
</ul>
<p><img src="/images/187.jpg" alt="187"></p>
<h3 id="增加硬盘"><a href="#增加硬盘" class="headerlink" title="增加硬盘"></a>增加硬盘</h3><p>【案例】添加一块硬盘2G</p>
<h4 id="1）虚拟机添加硬盘"><a href="#1）虚拟机添加硬盘" class="headerlink" title="1）虚拟机添加硬盘"></a>1）虚拟机添加硬盘</h4><p><img src="/images/188.jpg" alt="188"></p>
<p><img src="/images/189.jpg" alt="189"></p>
<h4 id="2）分区"><a href="#2）分区" class="headerlink" title="2）分区"></a>2）分区</h4><ol>
<li>设置分区</li>
</ol>
<p><img src="/images/190.jpg" alt="190"></p>
<ol start="2">
<li>输入m -&gt; 输入n添加一个新的分区</li>
</ol>
<p><img src="/images/191.jpg" alt="191"></p>
<ol start="3">
<li>输入p确定划一个主分区-&gt;输入1表示主分区的第一块分区-&gt;默认回车-&gt;输入w 把信息写入硬盘并退出</li>
</ol>
<p><img src="/images/192.jpg" alt="192"></p>
<h4 id="3）格式化"><a href="#3）格式化" class="headerlink" title="3）格式化"></a>3）格式化</h4><blockquote>
<p>指令：mkfs -t ext4 /dev/sdb1</p>
</blockquote>
<p>ext4是分区类型</p>
<p><img src="/images/193.jpg" alt="193"></p>
<h4 id="4）挂载"><a href="#4）挂载" class="headerlink" title="4）挂载"></a>4）挂载</h4><ol>
<li><p>创建一个/home/newdisk</p>
<blockquote>
<p>mkdir  /home/newdisk</p>
</blockquote>
</li>
<li><p>挂载</p>
<blockquote>
<p>mount  /dev/sdb1  /home/newdist</p>
</blockquote>
</li>
<li><p>查看挂载是否成功</p>
<blockquote>
<p>lsblk -f</p>
</blockquote>
</li>
</ol>
<h4 id="5）设置自动挂载"><a href="#5）设置自动挂载" class="headerlink" title="5）设置自动挂载"></a>5）设置自动挂载</h4><ol>
<li>编辑文件 vim /etc/fstab 保存退出</li>
</ol>
<p><img src="/images/194.jpg" alt="194"></p>
<ol start="2">
<li>使其生效，自动挂载</li>
</ol>
<blockquote>
<p>mount -a</p>
</blockquote>
<ol start="3">
<li>重启</li>
</ol>
<blockquote>
<p>reboot</p>
</blockquote>
<h4 id="6）断开挂载"><a href="#6）断开挂载" class="headerlink" title="6）断开挂载"></a>6）断开挂载</h4><blockquote>
<p>umount  /dev/sdb1  或者   umount  /newdisk</p>
</blockquote>
<p>注：需要离开该目录才能卸载</p>
<h2 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h2><h3 id="虚拟机网络连接"><a href="#虚拟机网络连接" class="headerlink" title="虚拟机网络连接"></a>虚拟机网络连接</h3><h4 id="桥接模式"><a href="#桥接模式" class="headerlink" title="桥接模式"></a>桥接模式</h4><p><img src="/images/28.png" alt="28"></p>
<ul>
<li>桥接模式，Linux可以和其他的系统通信。但是可能造成ip冲突</li>
</ul>
<h4 id="NAT模式"><a href="#NAT模式" class="headerlink" title="NAT模式"></a>NAT模式</h4><p><img src="/images/29.png" alt="29"></p>
<ul>
<li>网络地址转换方式：linux可以访问外网，不会造成ip冲突</li>
</ul>
<h3 id="查看网络IP和网关"><a href="#查看网络IP和网关" class="headerlink" title="查看网络IP和网关"></a>查看网络IP和网关</h3><h4 id="修改虚拟网卡的ip地址"><a href="#修改虚拟网卡的ip地址" class="headerlink" title="修改虚拟网卡的ip地址"></a>修改虚拟网卡的ip地址</h4><p><img src="/images/196.jpg" alt="196"></p>
<p>当前为192.168.159.xxxx</p>
<h4 id="查看网关"><a href="#查看网关" class="headerlink" title="查看网关"></a>查看网关</h4><p>在linux中查看</p>
<p><img src="/images/198.jpg" alt="198"></p>
<p>在windows中查看vmnet8 网络配置</p>
<p><img src="/images/199.jpg" alt="199"></p>
<h3 id="网络环境配置"><a href="#网络环境配置" class="headerlink" title="网络环境配置"></a>网络环境配置</h3><h4 id="自动获取"><a href="#自动获取" class="headerlink" title="自动获取"></a>自动获取</h4><p><img src="/images/195.jpg" alt="195"></p>
<p>下次登录时自动连接网络</p>
<p>缺点：linux启动后会自动获取IP缺点是每次自动获取的IP地址可能不一样。不适用与做服务器，服务器的IP需要是固定的</p>
<h4 id="指定固定的IP"><a href="#指定固定的IP" class="headerlink" title="指定固定的IP"></a>指定固定的IP</h4><p>直接修改配置文件来制定IP，并可以连接到外网</p>
<p>【案例】将ip地址配置为静态，ip地址为192.168.159.131[NAT模式]</p>
<ul>
<li>编辑网卡的配置文件 （以下为eth0网卡）</li>
</ul>
<blockquote>
<p>vim /etc/sysconfig/network-scripts/ifcfg-eth0</p>
</blockquote>
<p><img src="/images/200.jpg" alt="200"></p>
<p>【桥接模式】</p>
<p><img src="/images/30.png" alt="30"></p>
<ul>
<li>重启网络服务</li>
</ul>
<blockquote>
<p>service network restart</p>
</blockquote>
<h2 id="服务管理"><a href="#服务管理" class="headerlink" title="服务管理"></a><span id="fuwuguanli">服务管理</span></h2><h3 id="查看服务名"><a href="#查看服务名" class="headerlink" title="查看服务名"></a>查看服务名</h3><blockquote>
<p> 方式1：使用setup-&gt;系统服务就可以看到</p>
</blockquote>
<p>终端输入：setup</p>
<p><img src="/images/204.jpg" alt="204"></p>
<p>选择系统服务，可看到服务</p>
<p><img src="/images/205.jpg" alt="205"></p>
<blockquote>
<p>方式2：ll /etc/init.d/服务名称</p>
</blockquote>
<p><img src="/images/206.jpg" alt="206"></p>
<h3 id="服务的运行级别"><a href="#服务的运行级别" class="headerlink" title="服务的运行级别"></a>服务的运行级别</h3><blockquote>
<p>查看或者修改默认级别：<strong>vim /etc/inittab</strong></p>
</blockquote>
<p><img src="/images/207.jpg" alt="207"></p>
<p>Linux系统有7种运行级别：常用的是3和5</p>
<ul>
<li>0：系统停机状态</li>
<li>1：单用户工作状态</li>
<li>2：多用户状态，不支持网络</li>
<li>3：多用户状态，登陆后进入控制台命令模式</li>
<li>4：系统未使用，保留</li>
<li>5：X11控制台，登陆后进入图形GUI模式</li>
<li>6：系统正常关闭并重启</li>
</ul>
<h3 id="设置自启动"><a href="#设置自启动" class="headerlink" title="设置自启动"></a>设置自启动</h3><p>通过<span id="chkconfig"><strong>chkconfig</strong></span>可以给每个服务的各个运行级别设置自启动/关闭</p>
<blockquote>
<p>基本语法</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">查看所有服务</span><br><span class="line"><span class="meta">#</span><span class="bash"> chkconfig  --list [| grep xxx]</span></span><br><span class="line"></span><br><span class="line">某个服务的运行状态</span><br><span class="line"><span class="meta">#</span><span class="bash"> chkconfig 服务名 --list</span></span><br><span class="line"></span><br><span class="line">给某个服务的哪个运行级别制定是否自启动</span><br><span class="line"><span class="meta">#</span><span class="bash"> chkconfig --level 5 服务名 on/off</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：chkconfig重新设置服务后自启动或关闭，需要重启机器才能生效</p>
</blockquote>
<h2 id="RPM和YUM"><a href="#RPM和YUM" class="headerlink" title="RPM和YUM"></a>RPM和YUM</h2><h3 id="RPM包管理"><a href="#RPM包管理" class="headerlink" title="RPM包管理"></a>RPM包管理</h3><h4 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">查询已安装的rpm列表</span><br><span class="line"><span class="meta">#</span><span class="bash"> rpm -qa | grep xx</span></span><br><span class="line"></span><br><span class="line">查询有没有安装火狐</span><br><span class="line"><span class="meta">#</span><span class="bash"> rpm -qa | grep firefox</span></span><br><span class="line"></span><br><span class="line">查询软件包信息</span><br><span class="line"><span class="meta">#</span><span class="bash"> rpm -qi firefox</span></span><br><span class="line"></span><br><span class="line">查询软件包中的文件</span><br><span class="line"><span class="meta">#</span><span class="bash"> rpm -ql firefox</span></span><br><span class="line"></span><br><span class="line">查询文件所属的软件包</span><br><span class="line"><span class="meta">#</span><span class="bash"> rpm -qf /etc/passwd</span></span><br></pre></td></tr></table></figure>
<h4 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">删除firefox软件包</span><br><span class="line"><span class="meta">#</span><span class="bash"> rpm -e firefox</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：如果其他软件包依赖于您要卸载的软件包，卸载则会产生错误信息</p>
</blockquote>
<p>如： <strong>rpm -e foo</strong></p>
<p>removing these packages would break dependencies:foo is needed by bar-1.0-1</p>
<p>若要删除此包 可以增加参数 –nodeps，就可以强制删除</p>
<p>如：<strong>rpm -e –nodeps foo</strong></p>
<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><blockquote>
<p>参数：</p>
</blockquote>
<ul>
<li>i   安装</li>
<li>v   提示</li>
<li>h   进度条</li>
</ul>
<blockquote>
<p>【例】安装Firefox浏览器</p>
</blockquote>
<ol>
<li><p>找到Firefox的安装rpm包，需要挂载上centos的iso文件，然后到/media/下去找到该rpm</p>
<p><img src="/images/211.jpg" alt="211"></p>
<p><img src="/images/212.jpg" alt="212"></p>
</li>
<li><p>复制该rpm包 拷贝到opt目录下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> cp firefox-45.0.1-1.el6.centos.x86_64.rpm  /opt/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>切换到/opt/目录，并安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> /opt/</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rpm -ivh firefox-45.0.1-1.el6.centos.x86_64.rpm</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="YUM包管理"><a href="#YUM包管理" class="headerlink" title="YUM包管理"></a>YUM包管理</h3><p>yum是一个shell前端软件包管理器。基于rpm包管理，能够从指定的服务器自动下载rpm包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包</p>
<blockquote>
<p>基本指令</p>
</blockquote>
<ul>
<li><p>查询yum服务器是否有需要安装的软件</p>
<p>yum list | grep xx软件列表</p>
</li>
<li><p>安装指定的yum包</p>
<p>yum install xxx 下载安装</p>
</li>
</ul>
<blockquote>
<p>【例】安装Firefox浏览器</p>
</blockquote>
<ol>
<li><p>查看Firefox rpm在yum服务器上是否存在</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> yum list | grep firefox</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> yum install firefox</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="更换yum源"><a href="#更换yum源" class="headerlink" title="更换yum源"></a>更换yum源</h4><p>国内比较有名有速度的yum源有：</p>
<ul>
<li>网易开源镜像站：<a href="http://mirrors.163.com" target="_blank" rel="noopener">http://mirrors.163.com</a></li>
<li>阿里云开源镜像站：<a href="http://mirrors.aliyun.com" target="_blank" rel="noopener">http://mirrors.aliyun.com</a></li>
<li>中科大的Linux安装镜像源：<a href="http://centos.ustc.edu.cn" target="_blank" rel="noopener">http://centos.ustc.edu.cn</a></li>
<li>搜狐的Linux安装镜像源：<a href="http://mirrors.sohu.com" target="_blank" rel="noopener">http://mirrors.sohu.com</a></li>
<li>北京首都在线科技：<a href="http://mirrors.yun-idc.com" target="_blank" rel="noopener">http://mirrors.yun-idc.com</a></li>
</ul>
<p>使用前可以 ping 一下以上更新源，看哪个快就用哪个</p>
<blockquote>
<p> 【例】以163的为例更换yum源</p>
</blockquote>
<ol>
<li>查看163的使用帮助文档：<a href="http://mirrors.163.com/.help/centos.html" target="_blank" rel="noopener">http://mirrors.163.com/.help/centos.html</a></li>
</ol>
<p><img src="/images/213.jpg" alt="213"></p>
<ol start="2">
<li><p>备份/etc/yum.repos.d/CentOS-Base.repo</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> /etc/yum.repos.d/</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mv CentOS-Base.repo CentOS-Base.repo.backup</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>根据系统版本下载对应的repo文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">centos 6 ：</span><br><span class="line"><span class="meta">#</span><span class="bash"> wget http://mirrors.163.com/.<span class="built_in">help</span>/CentOS6-Base-163.repo</span></span><br><span class="line">centos 7 ：</span><br><span class="line"><span class="meta">#</span><span class="bash"> wget http://mirrors.163.com/.<span class="built_in">help</span>/CentOS7-Base-163.repo</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>将下载回来的repo文件改名</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">centos 6 ：</span><br><span class="line"><span class="meta">#</span><span class="bash"> mv CentOS6-Base-163.repo CentOS-Base.repo</span></span><br><span class="line">centos 7 ：</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"><span class="comment"># mv CentOS7-Base-163.repo CentOS-Base.repo</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>生成缓存</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> yum clean all</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> yum makecache</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>重启系统</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> reboot</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>更新现有的软件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> yum -y update</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="WEB环境搭建"><a href="#WEB环境搭建" class="headerlink" title="WEB环境搭建"></a>WEB环境搭建</h2><h3 id="底层软件库"><a href="#底层软件库" class="headerlink" title="底层软件库"></a>底层软件库</h3><p>运行以下命令确保底层软件库都已安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt;# yum -y install gcc gcc-c++ autoconf automake zlib libxml2 libxml2-devel ncurses-devel libmcrypt libtool cmake bison make pcre pcre-devel libevent openssl openssl-devel gd-devel bzip2 bzip2-devel libcurl curl-devel python python-devel mysql-devel expat-devel</span><br></pre></td></tr></table></figure>
<h3 id="安装MySQL"><a href="#安装MySQL" class="headerlink" title="安装MySQL"></a>安装MySQL</h3><p>​    MySQL从5.5版本开始，通过<code>./configure</code>进行编译配置方式已经被取消，取而代之的是<code>cmake</code>工具。需要下载<code>CMake</code>编译器、<code>Boost</code>库、<code>ncurses</code>库和<code>GNU</code>分析器生成器<code>bison</code>这4种工具，可以用<code>yum install</code>的方式安装 <code>cmake</code>、<code>bison</code>、<code>boost</code>、<code>ncurses</code></p>
<p>MySQL二进制文件可以 <a href="http://dev.mysql.com/downloads/mysql" target="_blank" rel="noopener">http://dev.mysql.com/downloads/mysql</a> 或者 <a href="http://mirrors.sohu.com/mysql" target="_blank" rel="noopener">http://mirrors.sohu.com/mysql</a> 去下载</p>
<p>注意要下载与操作系统对应的版本及位数（32位或64位），编译安装需要下载源码版(Source Code)，此处以mysql-5.7.24tar.gz为例</p>
<p><strong>以下 安 装中 涉 及的 几点 需 要提 前 说明 的问 题 ：</strong></p>
<ul>
<li>所有 下 载的 文件 将 保存 在 /root 目 录下</li>
<li>mysql 将以 mysql 用户 运 行， 而 且将 加入 service 开 机 自动 运 行</li>
<li>mysql 将被 安 装在 /usr/local/mysql/ 目录 下</li>
<li>mysql 默认 安 装使 用 utf8 字符集</li>
<li>mysql 的数 据 和日 志文 件 保存 在 /usr/local/mysql/data/ 目录 下</li>
<li>mysql 的配 置 文件 保存 于 /usr/local/mysql/etc/my.cnf</li>
</ul>
<blockquote>
<p>注意 从 MySQL 5.7.5 开 始 Boost 库是 必需 的</p>
</blockquote>
<h4 id="安装依赖库"><a href="#安装依赖库" class="headerlink" title="安装依赖库"></a>安装依赖库</h4><ol>
<li><p>安装 cmake 和 bison 与 ncurses</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> yum -y install -y cmake bison ncurses</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>下载 Boost</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> wget http://sourceforge.net/projects/boost/files/boost/1.59.0/boost_1_59_0.tar.gz</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>解压</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> tar -zxvf boost_1_59_0.tar.gz</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>移动</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mv boost_1_59_0 /usr/<span class="built_in">local</span>/boost</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="安装MySQL-1"><a href="#安装MySQL-1" class="headerlink" title="安装MySQL"></a>安装MySQL</h4><ol>
<li><p><strong>建立mysql安装目录和用户</strong></p>
<p>在/usr/local/mysql建立【data】、【tmp】、【log】、【etc】4个目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">建立/usr/local/mysql</span><br><span class="line"><span class="meta">#</span><span class="bash"> mkdir -pv /usr/<span class="built_in">local</span>/mysql</span></span><br><span class="line">进入该目录</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/mysql</span></span><br><span class="line">创建四个目录</span><br><span class="line"><span class="meta">#</span><span class="bash"> mkdir data tmp <span class="built_in">log</span> etc</span></span><br><span class="line">添加mysql用户组</span><br><span class="line"><span class="meta">#</span><span class="bash"> groupadd mysql</span></span><br><span class="line">把用户设为不可登录</span><br><span class="line"><span class="meta">#</span><span class="bash"> useradd -g mysql -s /usr/sbin/nologin mysql</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>下载mysql</strong> (D盘下有)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> ~</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> wget http://mirrors.sohu.com/mysql/MySQL-5.7/mysql-5.7.24.tar.gz</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>解压并进入目录</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> tar -zxvf mysql-5.7.24.tar.gz</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> mysql-5.7.24</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>进行软件配置和环境检测</strong></p>
<p>复制粘贴以下内容进行配置</p>
<ul>
<li>cmake     #设置安装目录</li>
<li>-DCMAKE_INSTALL_PREFIX=/usr/local/mysql        #设置sock目录</li>
<li>-DMYSQL_UNIX_ADDR=/usr/local/mysql/tmp/mysql.sock    #设置数据库存放目录</li>
<li>-DMYSQL_DATADIR=/usr/local/mysql/data    #设置配置文件my.cnf存放目录</li>
<li>-DSYSCONFDIR=/usr/local/mysql/etc     #设置mysql的默认使用用户</li>
<li>-DMYSQL_USER=mysql    #设置默认字符集</li>
<li>-DDEFAULT_CHARSET=utf8    #默认校对规则</li>
<li>-DDEFAULT_COLLATION=utf8_general_ci    #指明安装额外字符集的支持</li>
<li>-DWITH_EXTRA_CHARSETS:STRING=utf8,gbk    #去除debug模式</li>
<li>-DWITH_DEBUG=0     #以下几条开启常用的引擎</li>
<li>-DDOWNLOAD_BOOST=1      #如果没有指定boost底层库，从互联网下载</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql-5.7.24]# cmake \</span><br><span class="line">-DCMAKE_INSTALL_PREFIX=/usr/local/mysql \</span><br><span class="line">-DMYSQL_UNIX_ADDR=/usr/local/mysql/tmp/mysql.sock \</span><br><span class="line">-DMYSQL_DATADIR=/usr/local/mysql/data \</span><br><span class="line">-DSYSCONFDIR=/usr/local/mysql/etc \</span><br><span class="line">-DMYSQL_USER=mysql \</span><br><span class="line">-DDEFAULT_CHARSET=utf8 \</span><br><span class="line">-DDEFAULT_COLLATION=utf8_general_ci \</span><br><span class="line">-DWITH_EXTRA_CHARSETS:STRING=utf8,gbk \</span><br><span class="line">-DWITH_DEBUG=0 \</span><br><span class="line">-DWITH_MYISAM_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_INNOBASE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_ARCHIVE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_PARTITION_STORAGE_ENGINE=1 \</span><br><span class="line">-DENABLED_LOCAL_INFILE=1 \</span><br><span class="line">-DWITH_EMBEDDED_SERVER=1 \</span><br><span class="line">-DMYSQL_USER=mysql \</span><br><span class="line">-DWITH_BOOST=/usr/local/boost \</span><br><span class="line">-DDOWNLOAD_BOOST=1</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>编译软件并且进行安装</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> make </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> make install</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>另外</strong>：如果过程中出现报错而中断，需要删除CMakeCache.txt文件后再执行 4.步骤内容（没出错请不要执行以下两行指令）：</p>
<p># make clean</p>
<p># rm -rf CMakeCache.txt 或者  unlink CMakeCache.txt</p>
</blockquote>
</li>
</ol>
<h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><ol>
<li><p><strong>使用递归，把mysql目录所有者设置为mysql这个用户</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> chown -R mysql:mysql /usr/<span class="built_in">local</span>/mysql</span></span><br></pre></td></tr></table></figure>
<p> 如果 /etc/my.cnf 存在的话，请删除</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> unlink /etc/my.cnf</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>进入MySQL安装目录下</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/mysql</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>根据实际情况优化mysql配置</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vim etc/my.cnf</span></span><br></pre></td></tr></table></figure>
<p>大概内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">default-character-set = utf8</span><br><span class="line">port = 3306</span><br><span class="line">socket = /usr/local/mysql/tmp/mysql.sock</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">datadir =/usr/local/mysql/data</span><br><span class="line">port = 3306</span><br><span class="line">socket = /usr/local/mysql/tmp/mysql.sock</span><br><span class="line">user = mysql</span><br><span class="line">symbolic-links = 0</span><br><span class="line">pid-file = /usr/local/mysql/tmp/mysql.pid</span><br><span class="line"></span><br><span class="line">explicit_defaults_for_timestamp = true</span><br><span class="line">sql_mode = ERROR_FOR_DIVISION_BY_ZERO,NO_ZERO_DATE,NO_ZERO_IN_DATE,NO_AUTO_CREATE_USER</span><br><span class="line"></span><br><span class="line">slow_query_log = on</span><br><span class="line">slow_query_log_file = /usr/local/mysql/log/slow.log</span><br><span class="line">long_query_time = 2</span><br><span class="line"></span><br><span class="line">log_error = /usr/local/mysql/log/mysql.err</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>初始化和启动</strong></p>
<p>1) <strong>初始化mysql的基本表</strong></p>
<blockquote>
<p>mysql5.7以前：</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">shell&gt;</span><span class="bash"><span class="comment"># /usr/local/mysql/scripts/mysql_install_db  \</span></span></span><br><span class="line">--defaults-file=/usr/local/mysql/my.cnf \</span><br><span class="line">--basedir=/usr/local/mysql \</span><br><span class="line">--datadir=/usr/local/mysql/data \</span><br><span class="line">--user=mysql</span><br></pre></td></tr></table></figure>
<blockquote>
<p>mysql5.7及以上：</p>
</blockquote>
<p>–initialize会生成一个随机密码(~/.mysql_secret)，而–initialize-insecure不会生成密码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">shell&gt;</span><span class="bash"><span class="comment"># /usr/local/mysql/bin/mysqld \</span></span></span><br><span class="line">--initialize-insecure \</span><br><span class="line">--basedir=/usr/local/mysql \</span><br><span class="line">--datadir=/usr/local/mysql/data \</span><br><span class="line">--user=mysql</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：</p>
<p>​    如果初始化出错，则需要用 rm -rf /usr/local/mysql/data/* 将 mysql 的 data 目录下的文件和目录都删除，然后再重新运行以上语句</p>
</blockquote>
</li>
<li><p><strong>启动mysql</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> /usr/<span class="built_in">local</span>/mysql/bin/mysqld_safe &gt; /dev/null 2&gt;&amp;1 &amp;</span></span><br></pre></td></tr></table></figure>
<p>查看是否启动</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ps -ef|grep mysqld</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/214.jpg" alt="214"></p>
<p>看到两条以上则启动成功</p>
</li>
<li><p><strong>修改mysql的root密码</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> /usr/<span class="built_in">local</span>/mysql/bin/mysqladmin -u root password 123abc</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>增加到开机启动</strong></p>
<p>先将mysqld设置为服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> cp /usr/<span class="built_in">local</span>/mysql/support-files/mysql.server /etc/rc.d/init.d/mysqld</span></span><br></pre></td></tr></table></figure>
<p>将mysqld服务加入启动项</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> chkconfig --add mysqld</span></span><br></pre></td></tr></table></figure>
<p>设置为自启动</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> chkconfig --level 345 mysqld on</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>level&lt;等级代号&gt; 　指定读系统服务要在哪一个执行等级中开启或关毕。</p>
</blockquote>
<ul>
<li>等级0表示：表示关机</li>
<li>等级1表示：单用户模式</li>
<li>等级2表示：无网络连接的多用户命令行模式</li>
<li>等级3表示：有网络连接的多用户命令行模式</li>
<li>等级4表示：不可用</li>
<li>等级5表示：带图形界面的多用户模式 </li>
<li>等级6表示：重新启动</li>
</ul>
</li>
<li><p><strong>将mysql命令加入到环境变量里</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> PATH=<span class="variable">$PATH</span>:/usr/<span class="built_in">local</span>/mysql/bin</span></span><br></pre></td></tr></table></figure>
<p>为了重启后仍能有效</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="string">'PATH=$PATH:/usr/local/mysql/bin'</span> &gt;&gt; /root/.bashrc</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>###【如果需要对外开放 3306 端口】</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> iptables -I INPUT -p tcp --dport 3306 -j ACCEPT</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>创建一个软链接</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mkdir -pv /var/lib/mysql</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ln -s /usr/<span class="built_in">local</span>/mysql/tmp/mysql.sock /var/lib/mysql/mysql.sock</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="启动mysql"><a href="#启动mysql" class="headerlink" title="启动mysql"></a>启动mysql</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mysql -uroot -p123abc</span></span><br><span class="line">关闭</span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> quit;</span></span><br></pre></td></tr></table></figure>
<h3 id="安装PHP"><a href="#安装PHP" class="headerlink" title="安装PHP"></a>安装PHP</h3><p>安装PHP之前，首先要检查安装libxml2、libxml2-devvel、gd-devel</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> rpm -qa | grep libxml2*</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rpm -qa | grep gd-devel*</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/215.jpg" alt="215"></p>
<p>如果没有安装，可以使用yum -y install命令进行安装。</p>
<p>php可以到 <a href="http://php.net/downloads.php" target="_blank" rel="noopener">http://php.net/downloads.php</a> 或者 <a href="http://mirrors.sohu.com/php/" target="_blank" rel="noopener">http://mirrors.sohu.com/php/</a> 去下 载,此处 以php-7.2.2.tar.gz为例 </p>
<p><strong>以下安装中涉及的几点需要提前说明的问题：</strong></p>
<ul>
<li>所有下载的文件将保存在 /root 目录下</li>
<li>php 将以 FastCGI模式运行，监听 9000 端口(默认端口)</li>
<li>php 将被安装在 /usr/local/php 目录下</li>
<li>php 的配置文件保存于 /usr/local/php/etc/php.ini</li>
<li>php 的扩展库文件，如果可以的话，尽量放在 /usr/local/php/lib/php/extensions/ 目录</li>
</ul>
<h4 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h4><ol>
<li><strong>下载php</strong></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> ~</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> wget http://am1.php.net/distributions/php-7.2.2.tar.gz</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li><strong>解压并进入目录</strong></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> tar -zxvf php-7.2.2.tar.gz</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> php-7.2.2</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li><p><strong>进行软件的配置和环境检测</strong></p>
<p>以上内容的解释如下：</p>
<ul>
<li>./configure \<br>   –prefix=/usr/local/php \                        # 指定php安装目录<br>   –with-config-file-path=/usr/local/php/etc \        # 设置php.ini配置文件存放的路径<br>   –enable-fpm \                                # 开启PHP-FPM，用于控制PHP-CGI的FastCGI进程<br>   –enable-opcache \                            # PHP新增opcache功能<br>   –with-zlib-dir \                                # 加载zlib库<br>   –with-bz2 \                                    # 加载bz2的压缩库<br>   –with-libxml-dir=/usr \                        # 加载xml库<br>   –with-gd \                                    # 加载gd库<br>   –with-freetype-dir \                            # 加载字体库<br>   –with-jpeg-dir \                                # 加载jpeg库<br>   –with-png-dir \                                # 加载png库<br>   –enable-mbstring \                            # 开启mbstring加密库<br>   –with-mysql=/usr/local/mysql \                # 加载mysql，并指定mysql基本路径</li>
<li>–with-mysqli=/usr/local/mysql/bin/mysql_config \ # 加载mysqli库，并指定mysql配置工具<br>   –with-pdo-mysql=/usr/local/mysql \            # 加载pdo对mysql的支持<br>   –with-iconv \                                    # 开启转换字符集<br>   –disable-ipv6 \                                # 关闭ipv6支持<br>   –enable-static \                                # 以静态方式编辑php库<br>   –enable-inline-optimization \                    # 开启优化线程<br>   –enable-sockets \                            # 开启sockets支持<br>   –enable-soap \                                #开启soap对web service的支持<br>   –with-openssl \                                # 开启ssl支持<br>   –with-curl                                    # 模拟浏览器</li>
</ul>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">./configure \</span><br><span class="line">--prefix=/usr/local/php \</span><br><span class="line">--with-config-file-path=/usr/local/php/etc \</span><br><span class="line">--enable-fpm \</span><br><span class="line">--enable-opcache \</span><br><span class="line">--with-zlib-dir \</span><br><span class="line">--with-bz2 \</span><br><span class="line">--with-libxml-dir=/usr \</span><br><span class="line">--with-gd \</span><br><span class="line">--with-freetype-dir \</span><br><span class="line">--with-jpeg-dir \</span><br><span class="line">--with-png-dir \</span><br><span class="line">--enable-mbstring \</span><br><span class="line">--with-mysql=/usr/local/mysql \</span><br><span class="line">--with-mysqli=/usr/local/mysql/bin/mysql_config \</span><br><span class="line">--with-pdo-mysql=/usr/local/mysql \</span><br><span class="line">--with-iconv \</span><br><span class="line">--disable-ipv6 \</span><br><span class="line">--enable-static \</span><br><span class="line">--enable-inline-optimization \</span><br><span class="line">--enable-sockets \</span><br><span class="line">--enable-soap \</span><br><span class="line">--with-openssl \</span><br><span class="line">--with-curl</span><br></pre></td></tr></table></figure>
<ol start="4">
<li><strong>编译软件并且进行安装</strong></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure>
<h4 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h4><ol>
<li><p><strong>复制配置文件</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> cp php.ini-production /usr/<span class="built_in">local</span>/php/etc/php.ini</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cp sapi/fpm/init.d.php-fpm /etc/rc.d/init.d/php-fpm</span></span><br><span class="line">赋予其可执行权限</span><br><span class="line"><span class="meta">#</span><span class="bash"> chmod +x /etc/rc.d/init.d/php-fpm</span></span><br><span class="line">拷贝产生 php-fpm 的配置文件</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/php/etc</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cp php-fpm.conf.default php-fpm.conf</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>配置php.ini</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vim php.ini</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>找到 ;date.timezone = 修改为 date.timezone = Asia/Shanghai</p>
</li>
<li><p>根据自己的需求调整以下选项的值</p>
<p>error_reporting = E_ALL &amp; ~E_NOTICE &amp; ~E_STRICT &amp; ~E_DEPRECATED</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">display_errors = On</span><br><span class="line"></span><br><span class="line">max_execution_time = 60</span><br><span class="line"></span><br><span class="line">max_input_time = 60</span><br><span class="line"></span><br><span class="line">memory_limit = 256M</span><br><span class="line"></span><br><span class="line">post_max_size = 256M</span><br><span class="line"></span><br><span class="line">upload_max_filesize = 256M</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>配置 php-fpm.conf</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/php/etc/php-fpm.d</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cp www.conf.default www.conf</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> vim www.conf</span></span><br></pre></td></tr></table></figure>
<ul>
<li>找到 user = nobody 和 group = nobody，将 nobody 改成 www</li>
<li>找到 listen.owner=nobody 和 listen.group= nobody，将 nobody 改成 www</li>
</ul>
<blockquote>
<p>注意：</p>
</blockquote>
<p>必须得先新增www用户，否则无法启动php</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> groupadd www</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> useradd -g www -s /usr/sbin/nologin www</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>将php-fpm加入服务并自动启动</p>
<p><img src="/images/216.jpg" alt="216"></p>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> service php-fpm start</span></span><br><span class="line">测试启动是否成功 如图</span><br><span class="line"><span class="meta">#</span><span class="bash"> ps -ef | grep php-fpm</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> chkconfig --add php-fpm</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> chkconfig --level 345 php-fpm on</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>level&lt;等级代号&gt; 　指定读系统服务要在哪一个执行等级中开启或关毕。</p>
</blockquote>
<ul>
<li>等级0表示：表示关机</li>
<li>等级1表示：单用户模式</li>
<li>等级2表示：无网络连接的多用户命令行模式</li>
<li>等级3表示：有网络连接的多用户命令行模式</li>
<li>等级4表示：不可用</li>
<li>等级5表示：带图形界面的多用户模式</li>
<li>等级6表示：重新启动</li>
</ul>
<h3 id="安装Apache"><a href="#安装Apache" class="headerlink" title="安装Apache"></a>安装Apache</h3><p>安装apache之前，首先要先确保已安装 APR 和 APR-util</p>
<p>shell&gt;# yum -y install apr*</p>
<p>apache 可以到 <a href="http://mirrors.sohu.com/apache/" target="_blank" rel="noopener">http://mirrors.sohu.com/apache/</a> 下载，此处理以 httpd-2.4.37.tar.gz 为例</p>
<p><strong>以下安装中涉及的几点需要提前说明的问题：</strong></p>
<ul>
<li>所有下载的文件将保存在 /root 目录下</li>
<li>apache 将以 www用户运行，而且将加入 service 开机自动运行</li>
<li>apache 将被安装在 /usr/local/httpd 目录下</li>
<li>apache 的每个网站将存放在 /mydata/wwwroot 目录下，默认网站为php32</li>
<li>apache 的配置文件保存于 /usr/local/httpd/conf/httpd.cnf</li>
</ul>
<h4 id="安装依赖库-1"><a href="#安装依赖库-1" class="headerlink" title="安装依赖库"></a>安装依赖库</h4><ol>
<li><p>安装 apr 和 apr-util</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> ~</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> wget http://archive.apache.org/dist/apr/apr-1.4.8.tar.gz</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mkdir /usr/<span class="built_in">local</span>/apr</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>解压安装apr依赖库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> tar -zxf apr-1.4.8.tar.gz</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> apr-1.4.8</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ./configure --prefix=/usr/<span class="built_in">local</span>/apr</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>解压安装apr-util依赖库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> tar -zxf apr-util-1.5.2.tar.gz</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> apr-util-1.5.2</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ./configure --prefix=/usr/<span class="built_in">local</span>/apr-util --with-apr=/usr/<span class="built_in">local</span>/apr/bin/apr-1-config</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="安装apache"><a href="#安装apache" class="headerlink" title="安装apache"></a>安装apache</h4><ol>
<li><p><strong>下载apache</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> ~</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> wget http://mirrors.sohu.com/apache/httpd-2.4.37.tar.gz</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>解压并进入目录</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> tar -zxvf httpd-2.4.37.tar.gz</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> httpd-2.4.37</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>进行软件的配置和环境检测</strong></p>
<blockquote>
<p><strong>注意：</strong></p>
</blockquote>
<p>​    CentOS6才需要加最后那两条参数， –with-apr=/usr/local/apr  –with-apr-util=/usr/local/apr-util</p>
<blockquote>
<p>以下内容解释</p>
</blockquote>
<p><img src="/images/31.png" alt="31"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">./configure \</span><br><span class="line">--prefix=/usr/local/httpd \</span><br><span class="line">--enable-deflate \</span><br><span class="line">--enable-expires \</span><br><span class="line">--enable-headers \</span><br><span class="line">--enable-so \</span><br><span class="line">--enable-modules=most \</span><br><span class="line">--with-mpm=worker \</span><br><span class="line">--enable-rewrite \</span><br><span class="line">--enable-static-ab \</span><br><span class="line">--enable-ssl \</span><br><span class="line">--with-apr=/usr/local/apr \</span><br><span class="line">--with-apr-util=/usr/local/apr-util</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>编译软件并且进行安装</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="配置-2"><a href="#配置-2" class="headerlink" title="配置"></a>配置</h4><ol>
<li><p><strong>简单配置</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">创建网站根目录</span><br><span class="line"><span class="meta">#</span><span class="bash"> mkdir -pv /mydata/wwwroot</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> chown www:www /mydata/wwwroot</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/httpd/conf</span></span><br><span class="line">开始配置</span><br><span class="line"><span class="meta">#</span><span class="bash"> vim httpd.conf</span></span><br></pre></td></tr></table></figure>
<p>内容修改如下：</p>
<p>User www</p>
<p>Group www</p>
<p><img src="/images/32.png" alt="32"></p>
<p>ServerName localhost:80</p>
<p><img src="/images/33.png" alt="33"></p>
<p>将 DocumentRoot 以及整个 Directory 标签代码段的内容都注释掉</p>
<p><img src="/images/35.png" alt="35"></p>
<p><img src="/images/36.png" alt="36"></p>
<p>DirectoryIndex index.htm index.html index.php</p>
<p><img src="/images/37.png" alt="37"></p>
<p>modules/mod_rewrite.so    的注释去掉</p>
<p><img src="/images/38.png" alt="38"></p>
<p>/httpd-vhosts.conf开启</p>
<p><img src="/images/34.png" alt="34"></p>
<p>保存并退出</p>
</li>
<li><p><strong>优化虚拟主机配置</strong></p>
<p>httpd.conf中的每个 VirtualHost 代码段都是一个独立的虚拟主机配置。当配置多个虚拟主机时，需要在 httpd.conf 里写多个 VirtualHost 代码段，那么主配置文件就会变得重复、臃肿。==所以建议，将 VirtualHost 代码段都写在另一个文件（例如：conf/extra/httpd-vhosts.conf）或多个文件（例如按客户或项目分组），然后再用 Include 指令包含进来。==</p>
<ul>
<li><p>创建php33根目录</p>
<p><img src="/images/39.png" alt="39"></p>
</li>
<li><p>文档httpd-vhosts.conf</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vim /usr/<span class="built_in">local</span>/httpd/conf/extra/httpd-vhosts.conf</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 默 认 的 网 站 根 目 录</span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    ServerName localhost</span><br><span class="line">    DocumentRoot &quot;/mydata/wwwroot/php33/www/&quot;</span><br><span class="line">    &lt;Directory /&gt;</span><br><span class="line">        # 允 许 访 问 该 目 录</span><br><span class="line">        Require all granted</span><br><span class="line">        # 允许执行 .ht acces s 文件中的指令。</span><br><span class="line">        AllowOverride All</span><br><span class="line">        # 不 允 许 浏 览 目 录</span><br><span class="line">        Options -Indexes</span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>保存</p>
</li>
<li><p><strong>设为服务并开机自运行</strong></p>
<ul>
<li><p>编辑 apachectl</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vim /usr/<span class="built_in">local</span>/httpd/bin/apachectl</span></span><br></pre></td></tr></table></figure>
<p>加入以下注释内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> add by php32 2018-11-19</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> chkconfig: 2345 85 15</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> description: Activates/Deactivates Apache Web Server</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/41.png" alt="41"></p>
<p>找到 $HTTPD -k $ARGV</p>
<p>改成 $HTTPD -k $ARGV -f /usr/local/httpd/conf/httpd.conf</p>
<p>保存</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">启动 apache</span><br><span class="line"><span class="meta">#</span><span class="bash"> service httpd start 或 /usr/<span class="built_in">local</span>/httpd/bin/apachectl start</span></span><br><span class="line">将 httpd 设置为服务</span><br><span class="line"><span class="meta">#</span><span class="bash"> cp /usr/<span class="built_in">local</span>/httpd/bin/apachectl /etc/rc.d/init.d/httpd</span></span><br><span class="line">加入启动项</span><br><span class="line"><span class="meta">#</span><span class="bash"> chkconfig --add httpd</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> chkconfig --level 345 httpd on</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>查看httpd是否启动</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ps -ef|grep httpd</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h4 id="整合PHP"><a href="#整合PHP" class="headerlink" title="整合PHP"></a>整合PHP</h4><ol>
<li><p>修改 apache 的配置文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vim /usr/<span class="built_in">local</span>/httpd/conf/httpd.conf</span></span><br></pre></td></tr></table></figure>
<p>去掉以下两项的注释</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LoadModule proxy_module modules/mod_proxy.so</span><br><span class="line">LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so</span><br></pre></td></tr></table></figure>
<p>在底部加上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;FilesMatch \.php$&gt;</span><br><span class="line">	SetHandler &quot;proxy:fcgi://127.0.0.1:9000&quot;</span><br><span class="line">&lt;/FilesMatch&gt;</span><br></pre></td></tr></table></figure>
<p>保存</p>
</li>
<li><p>重启 apache</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> service httpd restart</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="开放端口"><a href="#开放端口" class="headerlink" title="开放端口"></a>开放端口</h4><ol>
<li><p>将 80 端口加入防火墙</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> iptables -I INPUT -p tcp --dport 80 -j ACCEPT</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>添加至自启动文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="string">'iptables -I INPUT -p tcp --dport 80 -j ACCEPT'</span> &gt;&gt; /etc/rc.d/rc.local</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h2><h3 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h3><table>
<thead>
<tr>
<th>快捷键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>yy</strong> / <strong>5yy</strong></td>
<td>复制当前行 复制5行</td>
</tr>
<tr>
<td><strong>dd</strong></td>
<td>删除当前行</td>
</tr>
<tr>
<td><strong>p</strong></td>
<td>粘贴</td>
</tr>
<tr>
<td><strong>u</strong></td>
<td>上一步操作</td>
</tr>
<tr>
<td></td>
</tr>
</tbody>
</table>
<h3 id="编辑模式"><a href="#编辑模式" class="headerlink" title="编辑模式"></a>编辑模式</h3><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>i</strong></td>
<td>光标前插入内容</td>
</tr>
<tr>
<td><strong>a</strong></td>
<td>光标后插入内容</td>
</tr>
<tr>
<td><strong>o</strong></td>
<td>下一行插入内容</td>
</tr>
<tr>
<td><strong>I</strong></td>
<td>行首插入内容</td>
</tr>
<tr>
<td><strong>A</strong></td>
<td>行末插入内容</td>
</tr>
<tr>
<td><strong>O</strong></td>
<td>上一行插入内容</td>
</tr>
</tbody>
</table>
<h3 id="末行模式"><a href="#末行模式" class="headerlink" title="末行模式"></a>末行模式</h3><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>:w</strong></td>
<td>保存</td>
</tr>
<tr>
<td><strong>:q</strong></td>
<td>退出</td>
</tr>
<tr>
<td><strong>:wq / :x</strong></td>
<td>保存退出</td>
</tr>
<tr>
<td><strong>:q!</strong></td>
<td>强制退出</td>
</tr>
<tr>
<td><strong>:w!</strong></td>
<td>强制保存(写入)</td>
</tr>
<tr>
<td><strong>:wq!</strong></td>
<td>强制保存退出</td>
</tr>
<tr>
<td><strong>:set nu</strong></td>
<td>设置行号</td>
</tr>
<tr>
<td><strong>:set nonu</strong></td>
<td>取消行号</td>
</tr>
<tr>
<td><strong>/aa</strong></td>
<td>搜索’aa’，n为下一个</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
</tr>
</tbody>
</table>
<h1 id="NoSql"><a href="#NoSql" class="headerlink" title="NoSql"></a>NoSql</h1><h2 id="Memcache"><a href="#Memcache" class="headerlink" title="Memcache"></a>Memcache</h2><blockquote>
<p><strong>优点</strong></p>
</blockquote>
<ul>
<li>纯内内存的存储机制，不占据硬盘空间，速度快</li>
<li>内置分布式算法，使得开发不需要自己去实现算法，只需要克隆就可以形成分布式集群服务器</li>
</ul>
<blockquote>
<p><strong>缺点</strong></p>
</blockquote>
<ul>
<li>安全性很差，因为它是用telnet协议</li>
<li>容量小，只有 64M，1个 key 只能存储 1M</li>
<li>由于 Memcache 把数据置于内存中，重启就会丢失，数据无法持久保存</li>
<li>数据零散，无法遍历</li>
</ul>
<h3 id="Linux中"><a href="#Linux中" class="headerlink" title="Linux中"></a>Linux中</h3><h4 id="安装-2"><a href="#安装-2" class="headerlink" title="安装"></a>安装</h4><blockquote>
<p>此命令安装memcache服务器+telnet客户端+telnet服务端</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> yum -y install memcached telnet telnet-server</span></span><br></pre></td></tr></table></figure>
<h4 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h4><h5 id="启动Memcache"><a href="#启动Memcache" class="headerlink" title="启动Memcache"></a>启动Memcache</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> service memcached start  	<span class="comment"># 启动</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> service memcached status 	<span class="comment"># 查看状态</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> service memcached stop	<span class="comment"># 停止</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> service memcached restart	<span class="comment"># 重启</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：</p>
<p>​    如果需要开启自启动 memcache服务，使用 shell&gt;# chkconfig memcached on</p>
<p>（建议暂不开启）</p>
</blockquote>
<h5 id="启动Telnet"><a href="#启动Telnet" class="headerlink" title="启动Telnet"></a>启动Telnet</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> service xinetd start		<span class="comment"># 启动</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> service xinetd status		<span class="comment"># 查看状态</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> service xinetd stop		<span class="comment"># 停止</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> service xinetd restart	<span class="comment"># 重启</span></span></span><br></pre></td></tr></table></figure>
<h4 id="telnet连接Memcache"><a href="#telnet连接Memcache" class="headerlink" title="telnet连接Memcache"></a>telnet连接Memcache</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">命令格式：telnet [memcache 的服务器地址] [端口]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：刚打开 telnet 客户端敲入回车键会出现 ERROR，并不是代表连接失败而是因为 memcache 服务器在等待你输入正确的指令</p>
</blockquote>
<ul>
<li>ctril + ] 去除memcache命令行 在输入quit退出</li>
<li>ctrl+BackSpace  删除键</li>
</ul>
<p><img src="/images/220.jpg" alt="220"></p>
<h4 id="开启PHP扩展"><a href="#开启PHP扩展" class="headerlink" title="开启PHP扩展"></a>开启PHP扩展</h4><h5 id="Memcache扩展"><a href="#Memcache扩展" class="headerlink" title="Memcache扩展"></a>Memcache扩展</h5><h6 id="安装-3"><a href="#安装-3" class="headerlink" title="安装"></a>安装</h6><ul>
<li><p>下载</p>
<p><a href="https://github.com/websupport-sk/pecl-memcache/archive/php7.zip" target="_blank" rel="noopener">https://github.com/websupport-sk/pecl-memcache/archive/php7.zip</a></p>
</li>
<li><p>把文件上传到Linux服务器上</p>
</li>
<li><p>解压并进入目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> unzip pecl-memcache-php7.zip</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> pecl-memcache-php7</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>生成编译文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> /usr/<span class="built_in">local</span>/php/bin/phpize</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>进行软件配置和环境检测</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ./configure --with-php-config=/usr/<span class="built_in">local</span>/php/bin/php-config</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编译软件并且进行安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/42.png" alt="42"></p>
<p>如图安装成功</p>
</li>
</ul>
<h6 id="配置-3"><a href="#配置-3" class="headerlink" title="配置"></a>配置</h6><ul>
<li><p>修改php.ini 加载Memcache组件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vim /usr/<span class="built_in">local</span>/php/etc/php.ini</span></span><br></pre></td></tr></table></figure>
<p>添加扩展 extension = “memcache.so”</p>
<p><img src="/images/43.png" alt="43"></p>
</li>
<li><p>重新启动PHP进程</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> pkill -9 php-fpm</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> service php-fpm start</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>检查是否添加成功</p>
<p><img src="/images/225.jpg" alt="225"></p>
<p>或者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/php/bin/php -m</span><br></pre></td></tr></table></figure>
<p><img src="/images/227.jpg" alt="227"></p>
</li>
</ul>
<h5 id="Memcached扩展"><a href="#Memcached扩展" class="headerlink" title="Memcached扩展"></a>Memcached扩展</h5><h6 id="安装依赖库-2"><a href="#安装依赖库-2" class="headerlink" title="安装依赖库"></a>安装依赖库</h6><ul>
<li><p>下载</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> wget http://pecl.php.net/get/igbinary-2.0.8.tgz</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> wget https://launchpad.net/libmemcached/1.0/1.0.18/+download/libmemcached-1.0.18.tar.gz</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>安装igbinary依赖库</p>
<ul>
<li><p>解压并进入目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> tar -zxvf igbinary-2.0.8.tgz</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> igbinary-2.0.8</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>生成编译文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> /usr/<span class="built_in">local</span>/php/bin/phpize</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>进行软件配置和环境检测</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ./configure --prefix=/usr/<span class="built_in">local</span>/igbinary --with-php-config=/usr/<span class="built_in">local</span>/php/bin/php-config</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编译软件并且进行安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>安装libmemcached依赖库</p>
<ul>
<li><p>解压并进入目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> tar -zxvf libmemcached-1.0.18.tar.gz</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> libmemcached-1.0.18</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>进行软件配置和环境检测</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ./configure --prefix=/usr/<span class="built_in">local</span>/libmemcached --with-memcached</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编译软件并且进行安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h6 id="安装memcached"><a href="#安装memcached" class="headerlink" title="安装memcached"></a>安装memcached</h6><ul>
<li><p>下载</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> wget http://pecl.php.net/get/memcached-3.0.4.tgz</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>解压并进入目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> tar -zxvf memcached-3.0.4.tgz</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> memcached-3.0.4</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>生成编译文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> /usr/<span class="built_in">local</span>/php/bin/phpize</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>进行软件配置和环境检测</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ./configure --with-php-config=/usr/<span class="built_in">local</span>/php/bin/php-config --<span class="built_in">enable</span>-memcached --<span class="built_in">enable</span>-memcached-json --<span class="built_in">enable</span>-memcached-igbinary --with-libmemcached-dir=/usr/<span class="built_in">local</span>/libmemcached --<span class="built_in">disable</span>-memcached-sasl</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编译软件并且进行安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="配置-4"><a href="#配置-4" class="headerlink" title="配置"></a>配置</h6><ul>
<li><p>修改php.ini 加载Memcached组件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vim /usr/<span class="built_in">local</span>/php/etc/php.ini</span></span><br></pre></td></tr></table></figure>
<p>添加扩展 extension = “memcached.so”</p>
<p><img src="/images/219.jpg" alt="219"></p>
</li>
<li><p>重新启动PHP进程</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> pkill -9 php-fpm</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> service php-fpm start</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>检查是否添加成功</p>
</li>
</ul>
<h3 id="windows中"><a href="#windows中" class="headerlink" title="windows中"></a>windows中</h3><h4 id="开启PHP扩展-1"><a href="#开启PHP扩展-1" class="headerlink" title="开启PHP扩展"></a>开启PHP扩展</h4><ul>
<li><p>查看PHP版本号与线程</p>
<p><img src="/images/222.jpg" alt="222"></p>
</li>
<li><p>下载扩展文件</p>
<p><a href="https://github.com/nono303/PHP7-memcache-dll" target="_blank" rel="noopener">https://github.com/nono303/PHP7-memcache-dll</a></p>
</li>
<li><p>复制到php扩展文件目录下</p>
<p><img src="/images/223.jpg" alt="223"></p>
</li>
<li><p>修改php.ini文件</p>
<p><img src="/images/224.jpg" alt="224"></p>
</li>
<li><p>保存并重启apache服务</p>
<p><img src="/images/225.jpg" alt="225"></p>
</li>
</ul>
<p>开启扩展成功</p>
<h4 id="安装-amp-开启服务"><a href="#安装-amp-开启服务" class="headerlink" title="安装&amp;开启服务"></a>安装&amp;开启服务</h4><ul>
<li><p>下载memcache服务软件</p>
<p>官网地址：<a href="http://memcached.org/" target="_blank" rel="noopener">http://memcached.org/</a></p>
</li>
<li><p>解压文件</p>
<p><img src="/images/226.jpg" alt="226"></p>
</li>
<li><p>启动memcache服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:\PHP\toolsmore\memcache\memcached-win64-1.4.4-14\memcached&gt; memcached.exe</span><br></pre></td></tr></table></figure>
<blockquote>
<p>memcached基本参数设置</p>
</blockquote>
<ul>
<li>-p 监听的端口</li>
<li>-l 连接的IP地址, 默认是本机</li>
<li><strong>-d start 启动memcached服务</strong></li>
<li><strong>-d restart 重启memcached服务</strong></li>
<li><strong>-d stop|shutdown 关闭正在运行的memcached服务</strong></li>
<li>-d install 安装memcached服务</li>
<li>-d uninstall 卸载memcached服务</li>
<li>-u 以的身份运行 (仅在以root运行的时候有效)</li>
<li>-m 最大内存使用，单位MB。默认64MB</li>
<li>-M 内存耗尽时返回错误，而不是删除项</li>
<li>-c 最大同时连接数，默认是1024</li>
<li>-f 块大小增长因子，默认是1.25</li>
<li>-n 最小分配空间，key+value+flags默认是48</li>
<li>-h 显示帮助</li>
</ul>
<blockquote>
<p>其中，加粗的三个参数只能在加入服务后才可使用</p>
</blockquote>
</li>
<li><p>添加win系统服务中（可选）</p>
<ul>
<li>管理员身份打开黑窗口</li>
<li>进入memcached目录</li>
<li>指令：memcached.exe -d install</li>
</ul>
</li>
<li><p>删除win系统服务 (可选)</p>
<ul>
<li>管理员身份打开黑窗口</li>
<li>进入memcached目录</li>
<li>指令：memcached.exe -d uninstall</li>
</ul>
</li>
</ul>
<h3 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h3><table>
<thead>
<tr>
<th>命令</th>
<th>详情</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>add</strong></td>
<td>创建一个存在内存中的 key =&gt; value的键值对</td>
</tr>
<tr>
<td><strong>get</strong></td>
<td>获取一个 memcache 的 key 中 value</td>
</tr>
<tr>
<td><strong>set</strong></td>
<td>修改或者添加一个键值对，键存在则是修改，不修改则添加</td>
</tr>
<tr>
<td><strong>delete</strong></td>
<td>主动删除一个键值对</td>
</tr>
<tr>
<td><strong>incr</strong></td>
<td>自增n</td>
</tr>
<tr>
<td><strong>decr</strong></td>
<td>自减n</td>
</tr>
<tr>
<td><strong>flush_all</strong></td>
<td>清空 memecache 中所有数据</td>
</tr>
</tbody>
</table>
<ul>
<li><p><strong>过期时间</strong></p>
<p>单位为秒</p>
</li>
<li><p><strong>add</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">add [key 的名称][标识符][过期的时间][字节的大小]</span><br><span class="line">【例】</span><br><span class="line">add age 0 0 2</span><br><span class="line">12</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：一个回车代表2个字符</p>
</blockquote>
</li>
<li><p><strong>get</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">get [key 的名称]</span><br><span class="line"></span><br><span class="line">【例】</span><br><span class="line">get age</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>set</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">set [key 的名称][标识符][过期的时间][字节的大小]</span><br><span class="line">【例】</span><br><span class="line">set age 0 0 3</span><br><span class="line">100</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>delete</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">delete [key 的名称]</span><br><span class="line"></span><br><span class="line">【例】</span><br><span class="line">delete age</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>incr</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">incr [key 的名称] [value]</span><br><span class="line">【例】</span><br><span class="line">incr age 2</span><br><span class="line">14</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>decr</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">decr [key 的名称] [value]</span><br><span class="line">【例】</span><br><span class="line">decr age 2</span><br><span class="line">12</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>flush_all</strong></p>
<p>同重启memcache，为清空memcache中所有数据</p>
<blockquote>
<p>注意事项：重启telnet服务并不会清除 memcached 当中数据</p>
</blockquote>
<p>telnet只要启动过一次，将来发生启动或停止，但 memcached 没有停止的情况下，memcached 并不会丢失数据，除非 memcached 自己发生重启或停止，所有链接都会被终止与所有数据都丢失。</p>
</li>
</ul>
<h3 id="类常用方法"><a href="#类常用方法" class="headerlink" title="类常用方法"></a>类常用方法</h3><table>
<thead>
<tr>
<th>类方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>addServer(host, port)</strong></td>
<td>host 就是 Linux 服务器地址，port默认是 11211（memcached端口），用于连接 memcached 服务器</td>
</tr>
<tr>
<td><strong>addServers(servers)</strong></td>
<td>用于连接分布式 memcached 服务器，主要分布式</td>
</tr>
<tr>
<td><strong>set(key, value, expire)</strong></td>
<td>用于修改或添加内存的 memcached 数据，该方法有3个参数</td>
</tr>
<tr>
<td><strong>get(key)</strong></td>
<td>获取对于键值对</td>
</tr>
<tr>
<td><strong>delete(key)</strong></td>
<td>删除 memcached 当中键值对</td>
</tr>
</tbody>
</table>
<h4 id="连接服务器"><a href="#连接服务器" class="headerlink" title="连接服务器"></a>连接服务器</h4><p><img src="/images/45.png" alt="45"></p>
<p><img src="/images/44.png" alt="44"></p>
<h4 id="set方法"><a href="#set方法" class="headerlink" title="set方法"></a>set方法</h4><blockquote>
<p> 参数说明：</p>
</blockquote>
<ul>
<li>key 为键名</li>
<li>value 是键值</li>
<li>flag 使用MEMCACHE_COMPRESSED指定对值进行压缩(使用zlib)</li>
<li>exipre 是过期时间，expire 默认为0表示永远不过期，如果设置为秒，最大只能设置为30天的秒数(30 * 86400秒)</li>
</ul>
<blockquote>
<p>操作复合类型</p>
</blockquote>
<p><img src="/images/46.png" alt="46">效果如下所示：</p>
<p><img src="/images/47.png" alt="47"></p>
<blockquote>
<p>设置过期时间</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$memc-&gt;set(<span class="string">'string'</span>,<span class="string">'hello'</span>,<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<h4 id="操作分布式服务器"><a href="#操作分布式服务器" class="headerlink" title="操作分布式服务器"></a>操作分布式服务器</h4><p>memcache内置自动分布算法的原理：</p>
<p><img src="/images/48.png" alt="48"></p>
<p>【例】使用分布式的链接服务器，插入100条数据分布到不同的服务器中</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">        $memc = <span class="keyword">new</span> Memcached();</span><br><span class="line">        <span class="comment">//定义服务器的数量</span></span><br><span class="line">        $addServers = [</span><br><span class="line">                <span class="comment">//['ip','port','权重']</span></span><br><span class="line">                [<span class="string">'192.168.82.43'</span>,<span class="number">11211</span>,<span class="number">50</span>],</span><br><span class="line">                [<span class="string">'192.168.230.11'</span>,<span class="number">11211</span>,<span class="number">50</span>],</span><br><span class="line">        ];</span><br><span class="line">        <span class="comment">//连接</span></span><br><span class="line">        $memc-&gt;addServers($addServers);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//分别为服务器添加100数据</span></span><br><span class="line">        <span class="keyword">for</span> ($i = <span class="number">1</span>;$i&lt;=<span class="number">100</span>;$i++)&#123;</span><br><span class="line">                $memc-&gt;set(<span class="string">'i'</span>.$i,$i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">echo</span><span class="string">'success'</span>;</span><br></pre></td></tr></table></figure>
<h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><p>radis有5种数据类型，还有1种服务器命令类型(key服务器指令，不支持windows)</p>
<ul>
<li>String（字符串类型）</li>
<li>list（链表）</li>
<li>hash（哈希表类型）</li>
<li>set（无序的集合）</li>
<li>sorted set（有序集合，缩写为zset）</li>
</ul>
<p>而且 Redis 通过简单的配置把数据从内存保存到硬盘当中进行持久保存。</p>
<p>Redis 为高并发而生，是NoSql中的佼佼者</p>
<p>Redis读的速度是 110000次/秒，写的速度是81000次/秒。</p>
<h3 id="Redis和Memcache区别"><a href="#Redis和Memcache区别" class="headerlink" title="Redis和Memcache区别"></a>Redis和Memcache区别</h3><ul>
<li>Redis 拥有安全认证的密码机制，Memcache 没有</li>
<li>Redis 是内存 + 硬盘的存储机制存储大小远超 memcached 的  64M</li>
<li>Redis 的 1 个 key 最大可以存储 1G，而 memcached是 1M</li>
<li>Redis 是一个持久化的 NoSql产品，Redis 会以一种叫做快照的模式（把数据存储在硬盘中）操作数据，所以无论是重启还是杀死 Redis的进程，都不会导致 Redis的数据丢失。</li>
</ul>
<h3 id="安装和启动"><a href="#安装和启动" class="headerlink" title="安装和启动"></a>安装和启动</h3><blockquote>
<p>安装命令：</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> yum -y install redis</span></span><br></pre></td></tr></table></figure>
<p>有可以报以下错误：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost www]# yum -y install redis</span><br><span class="line">已加载插件：fastestmirror, refresh-packagekit, security</span><br><span class="line">设置安装进程</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line">No package redis available.</span><br><span class="line">错误：无须任何处理</span><br></pre></td></tr></table></figure>
<p>我们当前这个yum没有这个包，可以先安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> yum install epel-release</span></span><br></pre></td></tr></table></figure>
<h3 id="启动登录客户端"><a href="#启动登录客户端" class="headerlink" title="启动登录客户端"></a>启动登录客户端</h3><h4 id="启动redis服务器"><a href="#启动redis服务器" class="headerlink" title="启动redis服务器"></a>启动redis服务器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">命令：service redis start | restart | stop</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：</p>
</blockquote>
<ul>
<li>使用 service redis status 会发现 Redis 服务已停，不准确</li>
<li>建议使用 <strong>ps -ef | grep redis</strong></li>
</ul>
<h4 id="链接Redis"><a href="#链接Redis" class="headerlink" title="链接Redis"></a>链接Redis</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> redis-cli</span></span><br><span class="line">没有空格</span><br><span class="line"></span><br><span class="line">退出</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：Redis 默认端口为：6379</p>
</blockquote>
<h4 id="停止redis服务"><a href="#停止redis服务" class="headerlink" title="停止redis服务"></a>停止redis服务</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> service redis stop</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：如果使用 service redis stop 无法停止 redis 服务，需要使用 pkill -9 redis 命令强制杀死 redis 进程</p>
</blockquote>
<h3 id="数据类型-amp-命令"><a href="#数据类型-amp-命令" class="headerlink" title="数据类型&amp;命令"></a>数据类型&amp;命令</h3><h4 id="String数据类型"><a href="#String数据类型" class="headerlink" title="String数据类型"></a>String数据类型</h4><p>string 是 Redis 最基本的类型</p>
<blockquote>
<p><strong>管理命令</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>命令</th>
<th>详情</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>get</strong></td>
<td>获取Redis中的key对应的值，如果key不存在返回nil</td>
</tr>
<tr>
<td><strong>set</strong></td>
<td>用于设置或者修改Redis中的键值对</td>
</tr>
<tr>
<td><strong>expire</strong></td>
<td>设置键的过期时间</td>
</tr>
<tr>
<td><strong>del</strong></td>
<td>删除键的值</td>
</tr>
</tbody>
</table>
<ul>
<li><p><strong>get</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">get key</span><br><span class="line"></span><br><span class="line">【例】</span><br><span class="line">get age</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>set</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">set key value</span><br><span class="line"></span><br><span class="line">【例】</span><br><span class="line">set age 12</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>expire</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">expire key seconds</span><br><span class="line"></span><br><span class="line">【例】</span><br><span class="line">expire age 5</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>del</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">del key</span><br><span class="line"></span><br><span class="line">【例】</span><br><span class="line">del age</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="hash数据类型"><a href="#hash数据类型" class="headerlink" title="hash数据类型"></a>hash数据类型</h4><p>在哈希表中设置一个字段(key)和一个字段的值(value)，用一张表来表示一些特定的信息，如下所示：</p>
<table>
<thead>
<tr>
<th>id</th>
<th>username</th>
<th>age</th>
<th>job</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>qiudachui</td>
<td>18</td>
<td>IT</td>
</tr>
<tr>
<td>2</td>
<td>lidachui</td>
<td>17</td>
<td>IT</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>管理命令</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>命令</th>
<th>详情</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>hget</strong></td>
<td>在一张指定的哈希表中获取字段的值，如果字段不存在将返回 nil</td>
</tr>
<tr>
<td><strong>hset</strong></td>
<td>用于设置或修改哈希表中的字段值</td>
</tr>
<tr>
<td><strong>hmset</strong></td>
<td>用于设置哈希表中多个字段值</td>
</tr>
<tr>
<td><strong>hgetall</strong></td>
<td>在哈希表获取所有的字段和值</td>
</tr>
</tbody>
</table>
<ul>
<li><p><strong>hget</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hget key field</span><br><span class="line"></span><br><span class="line">#【例】</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">hget</span> <span class="title">userInfo:qiudachui</span> <span class="title">username</span></span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">hget</span> <span class="title">userInfo:qiudachui</span> <span class="title">age</span></span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">hget</span> <span class="title">userInfo:qiudachui</span> <span class="title">job</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>hset</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; hset key field value</span><br><span class="line"></span><br><span class="line">#【例】</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">hset</span> <span class="title">userInfo:qiudachui</span> <span class="title">username</span> <span class="title">qiudachui</span></span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">hset</span> <span class="title">userInfo:qiudachui</span> <span class="title">id</span> 1</span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">hset</span> <span class="title">userInfo:qiudachui</span> <span class="title">job</span> <span class="title">IT</span></span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">hset</span> <span class="title">userInfo:qiudachui</span> <span class="title">age</span> 22</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>hmset</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; hmset key field value [field value ...]</span><br><span class="line"></span><br><span class="line">#【例】</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">hmset</span> <span class="title">userInfo:lidachui</span> <span class="title">id</span> 2 <span class="title">username</span> <span class="title">lidachui</span> <span class="title">age</span> 17 <span class="title">job</span> <span class="title">IT</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>hgetall</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hgetall key</span><br><span class="line"></span><br><span class="line">#【例】</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">hgetall</span> <span class="title">userInfo:lidachui</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p><strong>注意</strong></p>
<p>​    此处key为 tablename:username，因为每个key都要唯一，若只写tablename则新增的数据会覆盖前面的数据，可以改写成tablename:1等等，但要保证唯一</p>
</blockquote>
<h4 id="list数据类型"><a href="#list数据类型" class="headerlink" title="list数据类型"></a>list数据类型</h4><p>链表数据结构中的栈：先进后出</p>
<p>链表数据结构中的队列：先进先出</p>
<blockquote>
<p><strong>管理命令</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>命令</th>
<th>详情</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>lpush</strong></td>
<td>从左加入一条数据，在栈中加入一条数据</td>
</tr>
<tr>
<td><strong>rpush</strong></td>
<td>从右加入一条数据，在列表中加入一条数据</td>
</tr>
<tr>
<td><strong>lrange</strong></td>
<td>在链表中获取一个范围(索引的范围)的数据</td>
</tr>
<tr>
<td><strong>lpop</strong></td>
<td>弹出头部元素，并且返回其值</td>
</tr>
<tr>
<td><strong>rpop</strong></td>
<td>弹出最后一个元素，并且返回其值</td>
</tr>
<tr>
<td><strong>ltrim</strong></td>
<td>让列表只保留指定区间内的元素，不在指定区间之内的元素都将被删除</td>
</tr>
</tbody>
</table>
<ul>
<li><p><strong>lpush</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">lpush key value [value ...]</span><br><span class="line"></span><br><span class="line">#【例】在一个名为 qiudachui 栈中压入数据：one、two、three</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">lpush</span> <span class="title">qiudachui</span> <span class="title">one</span></span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">lpush</span> <span class="title">qiudachui</span> <span class="title">two</span></span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">lpush</span> <span class="title">qiudachui</span> <span class="title">three</span></span></span><br><span class="line"><span class="function">#或</span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">lpush</span> <span class="title">qiudachui</span> <span class="title">one</span> <span class="title">two</span> <span class="title">three</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>rpush</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">rpush key value [value ...]</span><br><span class="line"></span><br><span class="line">#【例】在一个名为 lidachui 队列中压入数据：one、two、three</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">rpush</span> <span class="title">lidachui</span> <span class="title">one</span></span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">rpush</span> <span class="title">lidachui</span> <span class="title">two</span></span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">rpush</span> <span class="title">lidachui</span> <span class="title">three</span></span></span><br><span class="line"><span class="function">#或</span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">rpush</span> <span class="title">lidachui</span> <span class="title">one</span> <span class="title">two</span> <span class="title">three</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>lrange</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">lrange key <span class="built_in">start</span> stop</span><br><span class="line"></span><br><span class="line">#【例<span class="number">1</span>】：获取的所有数据</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">lrange</span> <span class="title">qiudachui</span> 0 -1</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">#【例2】从位置为1的地方开始获取到最后</span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">lrange</span> <span class="title">qiudachui</span> 1 -1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>lpop</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lpop key</span><br><span class="line"></span><br><span class="line">#【例】</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">lpop</span> <span class="title">lidachui</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>rpop</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rpop key</span><br><span class="line"></span><br><span class="line">#【例】</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">rpop</span> <span class="title">lidachui</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ltrim</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ltrim key <span class="built_in">start</span> stop</span><br><span class="line"></span><br><span class="line">#【例】</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">rpush</span> <span class="title">jack</span> <span class="title">one</span> <span class="title">two</span> <span class="title">three</span> <span class="title">four</span> <span class="title">five</span></span></span><br><span class="line"><span class="function">#查询结果如下</span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">lrange</span> <span class="title">jack</span> 0 -1</span></span><br><span class="line"><span class="function">1) "<span class="title">one</span>"</span></span><br><span class="line"><span class="function">2) "<span class="title">two</span>"</span></span><br><span class="line"><span class="function">3) "<span class="title">three</span>"</span></span><br><span class="line"><span class="function">4) "<span class="title">four</span>"</span></span><br><span class="line"><span class="function">5) "<span class="title">five</span>"</span></span><br><span class="line"><span class="function">#截取</span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">ltrim</span> <span class="title">jack</span> 2 4</span></span><br><span class="line"><span class="function">#查询结果如下</span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">lrange</span> <span class="title">jack</span> 0 -1</span></span><br><span class="line"><span class="function">1) "<span class="title">three</span>"</span></span><br><span class="line"><span class="function">2) "<span class="title">four</span>"</span></span><br><span class="line"><span class="function">3) "<span class="title">five</span>"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>注意： ltrim 保存区间必须具有连续性，而不是能是断开连续的</p>
</blockquote>
<h4 id="set数据类型-无序"><a href="#set数据类型-无序" class="headerlink" title="set数据类型(无序)"></a>set数据类型(无序)</h4><blockquote>
<p><strong>管理命令</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>命令</th>
<th>详情</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>sadd</strong></td>
<td>在无序集合当中添加一个元素，该元素如果存在该元素不会被重复添加</td>
</tr>
<tr>
<td><strong>smembers</strong></td>
<td>查看一个无序集合中的所有元素</td>
</tr>
<tr>
<td><strong>sdiff</strong></td>
<td>以一个集合作为标准去求另外一个集合不存在的元素，我们称为差集</td>
</tr>
<tr>
<td><strong>sinter</strong></td>
<td>一个集合和另外一个集合共同的元素，我们称为交集</td>
</tr>
<tr>
<td><strong>sunion</strong></td>
<td>求出两集合合并后所有的元素并去掉重复的元素的结果称为并集</td>
</tr>
<tr>
<td><strong>scard</strong></td>
<td>统计集合中的元素个数，并返回总数的整型值，该命令一般在社交网络中用于统计粉丝数</td>
</tr>
<tr>
<td><strong>srem</strong></td>
<td>用于删除无序集合中的元素，在社交网络开发中用于黑名单功能</td>
</tr>
</tbody>
</table>
<ul>
<li><p><strong>sadd</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sadd key member [member ...]</span><br><span class="line"></span><br><span class="line">#【例】创建一个zhangsan无序集合</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">sadd</span> <span class="title">zhangsan</span> <span class="title">a1</span></span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">sadd</span> <span class="title">zhangsan</span> <span class="title">b1</span></span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">sadd</span> <span class="title">zhangsan</span> <span class="title">c1</span></span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">sadd</span> <span class="title">zhangsan</span> <span class="title">d1</span></span></span><br><span class="line"><span class="function">#或</span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">sadd</span> <span class="title">lisi</span> <span class="title">a1</span> <span class="title">b1</span> <span class="title">c2</span> <span class="title">d2</span> <span class="title">e2</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>smembers</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">smembers key</span><br><span class="line"></span><br><span class="line">#【例】</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">smembers</span> <span class="title">zhangsan</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>sdiff</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sdiff key [key ...]</span><br><span class="line"></span><br><span class="line">#【例】以张三作为标准求李四的差集(李四没有的)</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">sdiff</span> <span class="title">zhangsan</span> <span class="title">lisi</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>sinter</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sinter key [key ...]</span><br><span class="line"></span><br><span class="line">#【例】</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">sinter</span> <span class="title">zhangsan</span> <span class="title">lisi</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>sunion</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sunion key [key ...]</span><br><span class="line"></span><br><span class="line">#【例】</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">sunion</span> <span class="title">zhangsan</span> <span class="title">lisi</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>scard</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scard key</span><br><span class="line"></span><br><span class="line">#【例】</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">scard</span> <span class="title">zhangsan</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>srem</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">srem key member [member ...]</span><br><span class="line"></span><br><span class="line">#【例】例如删除 zhangsan 集合中为 a1 的元素</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">srem</span> <span class="title">zhangsan</span> <span class="title">a1</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="zset数据类型-有序"><a href="#zset数据类型-有序" class="headerlink" title="zset数据类型(有序)"></a>zset数据类型(有序)</h4><p>​    sorted set 是 set 的一个升级版本，在 set 有基础上增加了一个顺序属性，这一属性在添加修改元素的时候可以指定，每次指定后，zset 会自动重新按新的值调整顺序。有序列表值完成的是集合元素排序的功能，一般很少用于其他方向。</p>
<blockquote>
<p><strong>管理命令</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>命令</th>
<th>详情</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>zadd</strong></td>
<td>向有序集合中添加元素。如果该元素存在，则更新其顺序。</td>
</tr>
<tr>
<td><strong>zrange</strong></td>
<td>按序号升序(由小到大)获取有集合中的内容</td>
</tr>
<tr>
<td><strong>zrevrange</strong></td>
<td>按序号升序(由小到大)获取有集合中的内容</td>
</tr>
</tbody>
</table>
<ul>
<li><p><strong>zadd</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">zadd key score member [score member ...]</span><br><span class="line"></span><br><span class="line">#【例】创建一个wangwu有序集合</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">zadd</span> <span class="title">wangwu</span> 1 <span class="title">a1</span></span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">zadd</span> <span class="title">wangwu</span> 2 <span class="title">b1</span></span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">zadd</span> <span class="title">wangwu</span> 3 <span class="title">c1</span></span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">zadd</span> <span class="title">wangwu</span> 4 <span class="title">d1</span></span></span><br><span class="line"><span class="function">#或</span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">zadd</span> <span class="title">zhaoliu</span> 1 <span class="title">a1</span> 2 <span class="title">b1</span> 3 <span class="title">c2</span> 4 <span class="title">d2</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：1，2，3叫序号，不叫索引，liminxian的序号是1，而索引号是0</p>
</blockquote>
</li>
<li><p><strong>zrange</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">zrange key <span class="built_in">start</span> stop [WITHSCORES]</span><br><span class="line"></span><br><span class="line">#【例】</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">zrange</span> <span class="title">stars</span> 0 -1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>zrevrange</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">zrevrange key <span class="built_in">start</span> stop [WITHSCORES]</span><br><span class="line"></span><br><span class="line">#【例】</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">zrevrange</span> <span class="title">stars</span> 0 -1</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="管理命令"><a href="#管理命令" class="headerlink" title="管理命令"></a>管理命令</h3><table>
<thead>
<tr>
<th>命令</th>
<th>详情</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>keys</strong></td>
<td>返回当前数据库里面的键(key)</td>
</tr>
<tr>
<td><strong>exists</strong></td>
<td>判断一个键(key)是否存在</td>
</tr>
<tr>
<td><strong>del</strong></td>
<td>删除指定的键，返回 1 代表删除键名成功，返回 0 代表删除失败</td>
</tr>
<tr>
<td><strong>type</strong></td>
<td>返回一个键的数据类型</td>
</tr>
<tr>
<td><strong>expire</strong></td>
<td>设置键的有效期，如果不调用该命令设置键名，默认的情况下键名本身就是永远不过期</td>
</tr>
<tr>
<td><strong>ttl</strong></td>
<td>查看一个 key 的过期剩余时间</td>
</tr>
</tbody>
</table>
<ul>
<li><p><strong>keys</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 返回当前数据库里面的所有键(key)</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">keys</span> * </span></span><br><span class="line"><span class="function"># 查询<span class="title">key</span>的存在，有则返回名称</span></span><br><span class="line"><span class="function"><span class="title">ip</span>:6379&gt; <span class="title">keys</span> <span class="title">zhangsan</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>exists</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#【例】判断 stars 是否存在 Redis 中</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">exists</span> <span class="title">stars</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：如果返回 0 代表该键名不存在，如果返回 1 代表键名存在</p>
</blockquote>
</li>
<li><p><strong>del</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#【例】删除zhangsan</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">del</span> <span class="title">zhangsan</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>type</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#【例】返回zhangsan的数据类型</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">type</span> <span class="title">zhangsan</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>expire</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#【例】设置一个 key 在 <span class="number">20</span> 秒后过期</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">expire</span> <span class="title">name</span> 20</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ttl</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#【例】查看一个name的过期剩余时间</span><br><span class="line"><span class="function">ip:6379&gt; <span class="title">ttl</span> <span class="title">name</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：返回-1表示永不过期 -2表示已过期</p>
</blockquote>
</li>
</ul>
<h3 id="安全认证"><a href="#安全认证" class="headerlink" title="安全认证"></a>安全认证</h3><p>​    在默认情况下 Redis 不需要任何密码就可以登陆，任何客户端只要连接6379端口就可以调用Redis命令，安全性不够，如果希望提高 Redis 的安全性，我们可以为 Redis 设置一个密码。Redis把设置密码的过程称为安全认证功能(Redis Auth)</p>
<p>密码存放在 Redis 的配置文件中(例如：/etc/redis.conf)</p>
<p>设置安全认证的步骤如下：</p>
<ul>
<li><p>使用 vim 打开 /etc/redis.conf 文件，查找到 foobared，</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vim /etc/redis.conf</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>把 requirepass 前面的#(井号)去除，将后面的 foobared 修改为：123456(Redis认证密码)</p>
<p><img src="/images/228.jpg" alt="228"></p>
</li>
<li><p>设置完成后保存并退出</p>
</li>
</ul>
<blockquote>
<p><strong>注意</strong>：内容必须顶格，requirepass前面不能有任何空格等</p>
</blockquote>
<ul>
<li><p>重启 Redis 服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> service redis restart</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用 redis-cli 命令登陆，发觉可以进入客户端界面但是无法操作</p>
</li>
<li><p>使用安全认证密码进行登陆</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> redis-cli -a 123456</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Redis的持久化-AOF-设置"><a href="#Redis的持久化-AOF-设置" class="headerlink" title="Redis的持久化 AOF 设置"></a>Redis的持久化 AOF 设置</h3><p>在 Redis 当中，Redis 有两种持久化模式，默认为快照样式(用于保存数据到硬盘的模式)</p>
<h4 id="快照模式"><a href="#快照模式" class="headerlink" title="快照模式"></a>快照模式</h4><p>默认安装完成就会自动开启的持久化模式</p>
<p>快照文件默认存储以下位置：/var/lib/redis/dump.redb</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shell&gt;# cd /var/lib/redis</span><br><span class="line">shell&gt;# ls -lh</span><br></pre></td></tr></table></figure>
<p><img src="/images/49.png" alt="49"></p>
<p>默认情况下快照模式==没有利用计算机的内存==，只是单方面反数据置于硬盘当中，如果希望 Redis 把硬盘+内存的存储方式利用起来，则要调整为 aof 模式</p>
<h4 id="Aof模式"><a href="#Aof模式" class="headerlink" title="Aof模式"></a>Aof模式</h4><p>如果开启硬盘+内存方式存储数据，Redis 默认情况下会先把数据存放到内存中，然后每隔 1 秒钟不把内存的数据同步到硬盘中</p>
<p>首先我们需要观察 /var/lib/redis 下有没有存在一个 .aof 的文件，查看结果如下图所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shell&gt;# /var/lib/redis</span><br><span class="line">shell&gt;# ls -lh</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：如果只有快照文件，而没有 aof 的文件，说明 redis 没有开启 aof 持久化模式</p>
</blockquote>
<h5 id="设置aof模式"><a href="#设置aof模式" class="headerlink" title="设置aof模式"></a>设置aof模式</h5><ol>
<li>使用 vim 打开 /etc/redis.conf 文件，搜索appendonly</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt;# vim /etc/redis.conf</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：如果 appendonly 为 no 表示当前是快照模式，不是 aof 模式</p>
</blockquote>
<ol start="2">
<li><p>把 appendonly 的选项由 no 改为 yes</p>
<p><img src="/images/50.png" alt="50"></p>
</li>
<li><p>重启 redis 服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> service redis restart</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>查看是否可启成功</p>
<p>进入 /var/lib/redis 目录下去查看是否有 .aof 文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shell&gt;# cd /var/lib/redis</span><br><span class="line">shell&gt;# ls -lh</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：如果我们添加数据，会改变 appendonly.aof 文件的大小</p>
</blockquote>
</li>
</ol>
<h4 id="PHP-中开启-Redis-扩展"><a href="#PHP-中开启-Redis-扩展" class="headerlink" title="PHP 中开启 Redis 扩展"></a>PHP 中开启 Redis 扩展</h4><h5 id="安装-4"><a href="#安装-4" class="headerlink" title="安装"></a>安装</h5><ol>
<li><p>下载</p>
<p>下载地址：<a href="https://codeload.github.com/phpredis/phpredis/zip/develop" target="_blank" rel="noopener">https://codeload.github.com/phpredis/phpredis/zip/develop</a></p>
</li>
<li><p>上传到服务器</p>
<p>可以使用 rz 上传或 ftp 上传</p>
<blockquote>
<p>注意：必须得安装了 vsftpd  或  lrzsz，我们这里以 rz 为例</p>
</blockquote>
</li>
<li><p>解压与进入目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> unzip phpredis-develop.zip</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> phpredis-develop</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>生成编译文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> /usr/<span class="built_in">local</span>/php/bin/phpize</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>进行软件配置和环境检测</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ./configure --with-php-config=/usr/<span class="built_in">local</span>/php/bin/php-config</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编译软件并且进行安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h5 id="配置-5"><a href="#配置-5" class="headerlink" title="配置"></a>配置</h5><ol>
<li><p>修改 php.ini 加载 Redis 组件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vim /usr/<span class="built_in">local</span>/php/etc/php.ini</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/229.jpg" alt="229"></p>
</li>
<li><p>结束PHP进程</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> pkill  -9  php-fpm</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>重新启动PHP进程</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> service php-fpm start</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>检查是否添加成功</p>
<ul>
<li>在站点目录下创建一个phpinfo.php文件，输入phpinfo()</li>
<li>shell&gt;# /usr/local/php/bin/php -m 查看是否含有redis</li>
</ul>
</li>
<li><p>把本地访问机制关闭</p>
<ul>
<li><p>使用vim打开/etc/redis.conf文件，找到bind 127.0.0.1这个选项如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vim /etc/redis.conf</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在bind前面加上#号进行注解</p>
<p><img src="/images/51.png" alt="51"></p>
</li>
<li><p>重启redis服务器</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> service redis restart</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h3 id="PHP操作Redis"><a href="#PHP操作Redis" class="headerlink" title="PHP操作Redis"></a>PHP操作Redis</h3><h4 id="连接Redis"><a href="#连接Redis" class="headerlink" title="连接Redis"></a>连接Redis</h4><p><img src="/images/52.png" alt="52"></p>
<h4 id="各种数据类型的操作"><a href="#各种数据类型的操作" class="headerlink" title="各种数据类型的操作"></a>各种数据类型的操作</h4><h5 id="string-类型"><a href="#string-类型" class="headerlink" title="string 类型"></a>string 类型</h5><p><img src="/images/230.jpg" alt="230"></p>
<h5 id="hash-类型"><a href="#hash-类型" class="headerlink" title="hash 类型"></a>hash 类型</h5><p><img src="/images/231.jpg" alt="231"></p>
<h5 id="set无序集合"><a href="#set无序集合" class="headerlink" title="set无序集合"></a>set无序集合</h5><p><img src="/images/233.jpg" alt="233"></p>
<h5 id="zset有序集合"><a href="#zset有序集合" class="headerlink" title="zset有序集合"></a>zset有序集合</h5><p><img src="/images/232.jpg" alt="232"></p>
<blockquote>
<p>注意：</p>
</blockquote>
<p>​    Zrange 与 zRevRange 有4个参数，第4个参数默认为：false，如果想键值调换就把第4个参数设置为：true</p>
<h3 id="Redis-实现消息队列"><a href="#Redis-实现消息队列" class="headerlink" title="Redis 实现消息队列"></a>Redis 实现消息队列</h3><p>在银行办理业务的过程就是使用 Redis 的消息队列完成，过程分以下两个步骤：</p>
<ul>
<li>取号(把取号人的数数据压入 list 队列中)</li>
<li>叫号(把 list 队列中的头部元素弹出队列)</li>
</ul>
<p>取号代码如下:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $redis = <span class="keyword">new</span> Redis();</span><br><span class="line">    <span class="comment">//连接</span></span><br><span class="line">    $redis-&gt;connect(<span class="string">'192.168.230.11'</span>,<span class="number">6379</span>);</span><br><span class="line">    <span class="comment">//设置密码</span></span><br><span class="line">    $redis-&gt;auth(<span class="string">'123456'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置排队人数</span></span><br><span class="line">    $array = [</span><br><span class="line">        <span class="string">'001号贵宾--大锤，请到6号窗口'</span>,</span><br><span class="line">        <span class="string">'002号贵宾--大锤，请到4号窗口'</span>,</span><br><span class="line">        <span class="string">'003号贵宾--大锤，请到3号窗口'</span>,</span><br><span class="line">    ];</span><br><span class="line">    <span class="comment">//添加到队列中</span></span><br><span class="line">    <span class="keyword">foreach</span>($array <span class="keyword">as</span> $v)&#123;</span><br><span class="line">        $redis-&gt;rpush(<span class="string">'setList'</span>,$v);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"success"</span>;</span><br></pre></td></tr></table></figure>
<p>叫号代码如下:</p>
<p><img src="/images/234.jpg" alt="234"></p>
<h1 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h1><p>​    MongoDB是一个介于关系型数据库和非关系型数据库之间的产品，是非关系型数据库当中功能最丰富，最像关系型数据库，但是 MongDB 做不到关系型数据库的连表，外键等操作，它的存储数据方式有点类似于 JSON 格式，MogoDB叫做 Bson（big json）格式。</p>
<ul>
<li>MongoDB是一个面向集合的，模式自由的文档型数据库。</li>
<li>MongoDB能很好地支持PHP。</li>
<li>MongoDB安全性是所有NoSql最好的。</li>
<li>MongoDB安装的文件比较大，占据了一定的硬盘空间。</li>
</ul>
<blockquote>
<p>缺点：</p>
</blockquote>
<p>不支持连表查询，不支持 sql 语句，不支持事务存储过程等，所以不适合存储数据关系比较复杂的数据，一般主要是当做一个==数据仓库==来使用。</p>
<blockquote>
<p>适用于：</p>
</blockquote>
<p>日志系统，股票数据等。</p>
<blockquote>
<p>不使用于：</p>
</blockquote>
<p>电子商务系统等需要连多表查询的功能。</p>
<p>国内职场中应用 MongoDB 最广泛的网站(PHP+MongoDB)：youku(优酷)、tudou(土豆)</p>
<blockquote>
<p>概念</p>
</blockquote>
<ul>
<li><p><strong>文档</strong></p>
<pre><code>==文档==是 MongoDB 中数据的==基本单元==，类似==关系型数据库的行==，多个键值对有序地放置在一起便是文档。
</code></pre></li>
</ul>
<p>MongoDB 中以文档的方式存取记录，如一条记录格式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&apos;username&apos;:&apos;php32&apos;, &apos;age&apos;:18, email:&apos;123456.gd@163.com&apos;, sex:&apos;男&apos;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>集合(表)</strong></li>
</ul>
<p>集合就是一组文档，==多个文档组成一个集合，集合类似于 MySQL 里面的表。==</p>
<p>模式自由（schema-free）：==意思是集合里面没有行和列的概念。==</p>
<blockquote>
<p>注意：</p>
</blockquote>
<p>MongoDB 中的==集合不用创建、没有结构==，所以可以放不同格式的文档。</p>
<ul>
<li><strong>数据库</strong></li>
</ul>
<p>多个集合可以组成数据库。一个MongoDB实例可以承载多个数据库，们之间完全独立。</p>
<p>MongoDB 中的数据库和 MySQL 中的数据库概念类似，只是==无需创建==。</p>
<p>==一个数据库中可以有多个集合。==</p>
<p>==一个集合中可以有多个文档(MongoDB里面的每一个文档，代表mysql的数据表中的每一行数据)。==</p>
<h2 id="安装-启动"><a href="#安装-启动" class="headerlink" title="安装 启动"></a>安装 启动</h2><ol>
<li>创建仓库</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">shell&gt;</span><span class="bash"><span class="comment"># vim /etc/yum.repos.d/mongodb-org-3.4.repo</span></span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>把下面的内容复制到文件中 保存退出</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[mongodb-org-3.4]</span><br><span class="line">name=MongoDB Repository</span><br><span class="line">baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.4/x86_64/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1</span><br><span class="line">gpgkey=https://www.mongodb.org/static/pgp/server-3.4.asc</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>yum安装 </li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">shell&gt;</span><span class="bash"><span class="comment"># yum install -y mongodb-org</span></span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>启动 MongoDB</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">shell&gt;</span><span class="bash"><span class="comment"># service mongod start	# 启动</span></span></span><br><span class="line"><span class="meta">shell&gt;</span><span class="bash"><span class="comment"># service mongod stop		# 停止</span></span></span><br><span class="line"><span class="meta">shell&gt;</span><span class="bash"><span class="comment"># service mongod restart	# 重启</span></span></span><br><span class="line"><span class="meta">shell&gt;</span><span class="bash"><span class="comment"># service mongod status	# 查看状态</span></span></span><br></pre></td></tr></table></figure>
<h2 id="db相关命令"><a href="#db相关命令" class="headerlink" title="db相关命令"></a>db相关命令</h2><h3 id="登录退出"><a href="#登录退出" class="headerlink" title="登录退出"></a>登录退出</h3><p>命令格式：<code>mongo [-u 登陆名][-p 登陆密码][ip:端口/数据库]</code></p>
<p>例如：mongo -uroot -p123456 localhost:27017/admin</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">连接 mongodb</span><br><span class="line"><span class="meta">#</span><span class="bash"> mongo -uroot -p123456 localhost:27017/admin</span></span><br><span class="line">退出</span><br><span class="line"><span class="meta">mongo&gt;</span><span class="bash">quit()</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：MongoDB 默认是没有用户与密码</p>
</blockquote>
<h3 id="查看所有db"><a href="#查看所有db" class="headerlink" title="查看所有db"></a>查看所有db</h3><p>命令格式：<code>show dbs</code></p>
<p>相当于 MySQL 中的 show databases(); 命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 显示所有数据库</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> show dbs;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">或</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> show databases;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>说明：</p>
</blockquote>
<ul>
<li>local 是本地系统数据库，默认是显示的，它不能被删除，否则 MongoDB会直接崩溃</li>
<li>admin 是管理员数据库，默认是隐藏的</li>
</ul>
<h3 id="查看目前db"><a href="#查看目前db" class="headerlink" title="查看目前db"></a>查看目前db</h3><p>命令：<code>db</code></p>
<blockquote>
<p>说明：相当于 MySQL 中的 select database(); 命令。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 显示目前所在的数据库</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db</span></span><br></pre></td></tr></table></figure>
<h3 id="选择-创建db"><a href="#选择-创建db" class="headerlink" title="选择/创建db"></a>选择/创建db</h3><p>命令：<code>use 数据库名</code></p>
<p>例如：use php32</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 选择 admin 数据库，因为 admmin 这个数据库本身就存在</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> use admin</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建 php32 数据库</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> use php32</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>说明：</p>
</blockquote>
<ul>
<li>如果 php33数据库存在，use 命令就是相当于MySQL中的 use 命令，选择数据库。</li>
<li>如果 php33数据库不存在，use 命令就是相当于MySQL中的 create database php33命令。</li>
</ul>
<h3 id="删除db"><a href="#删除db" class="headerlink" title="删除db"></a>删除db</h3><p>命令：<code>db.dropDatabase()</code></p>
<p>注意：删除数据库会让集合和文档全部丢失</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MongoDB&gt; db.dropDatabase()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：</p>
</blockquote>
<ul>
<li>删除数据库会让集合和文档全部丢失</li>
<li>绝对不能删除 local 数据库，因为这是一个系统数据库，删除则 MongoDB崩溃</li>
</ul>
<h3 id="帮助文档"><a href="#帮助文档" class="headerlink" title="帮助文档"></a>帮助文档</h3><p>命令：<code>db help()</code></p>
<p>作用：显示数据库的帮助文档信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 显示帮助文档</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.help()</span></span><br></pre></td></tr></table></figure>
<p>命令：<code>db.集合名称.help()</code></p>
<p>作用：显示当前操作数据库中的集合相关帮助文档信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 显示集合帮助指令</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class1.help()</span></span><br></pre></td></tr></table></figure>
<h2 id="集合相关命令"><a href="#集合相关命令" class="headerlink" title="集合相关命令"></a>集合相关命令</h2><h3 id="显示当前集合"><a href="#显示当前集合" class="headerlink" title="显示当前集合"></a>显示当前集合</h3><p>命令：<code>show tables</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 显示所有表名(集合)</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> show tabels</span></span><br><span class="line"><span class="meta">#</span><span class="bash">也可以使用 show collections 来替代</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> show collections</span></span><br></pre></td></tr></table></figure>
<h3 id="创建集合"><a href="#创建集合" class="headerlink" title="创建集合"></a>创建集合</h3><p>命令：<code>db.集合名.insert({bson 数据})</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在 php32 中创建一个集合为：class</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class.insert(&#123;name:<span class="string">'hehe'</span>, age:18&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 定义一个 _id 为 300 的文档(记录)</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class2.insert(&#123;_id:300, name:<span class="string">'lidachui'</span>&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在 class3 集合插入 1000 条学生记录</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> <span class="keyword">for</span>(var i=1;i&lt;=10;i++)&#123;</span></span><br><span class="line">... db.class2.insert(&#123;_id:i,name:'stu'+i,lesson:'php'+i&#125;)</span><br><span class="line">... &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：添加会默认创建一个_id的字段，并且是对象类型</p>
</blockquote>
<h3 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h3><p>命令：<code>db.集合名称.find({条件})[.limit().skip().count(true)]</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查询class2集合中_id 大于6的信息记录</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class2.find(&#123;_id: &#123;<span class="string">'$gt'</span>:6&#125;&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查询class3中_id小于或者等于10的文档</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class3.find( &#123;_id:&#123;<span class="string">'$lte'</span>:10&#125;&#125; )</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查询class3中_id小于等于5的文档，并且只显示前面的3条记录</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class3.find( &#123;_id:&#123;<span class="string">'$lte'</span>:5&#125;&#125; ).<span class="built_in">limit</span>(3)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查询_id小于等于5的文档，跳过前面2条记录，显示后面的3条记录</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class3.find( &#123;_id:&#123;<span class="string">'$lte'</span>:5&#125;&#125; ).skip(2).<span class="built_in">limit</span>(3)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 统计class3集合有多少数据(文档)</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class3.find().count(<span class="literal">true</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查询 _id小于等于7的文档，并且跳过前面3条记录，统计当前查询出多少条记录(个文档)</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class3.find( &#123;_id:&#123;<span class="string">'$lte'</span>:7&#125;&#125;).skip(3).count(<span class="literal">true</span>)</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：</p>
</blockquote>
<ul>
<li>如果在 MongoDB 中没有使用 count(true)，是无法把 skip 和 limit 看成一个条件</li>
<li>count()一定要放到最后</li>
</ul>
<h3 id="sort排序"><a href="#sort排序" class="headerlink" title="sort排序"></a>sort排序</h3><p>语法：<code>db.集合名称.find().sort( {字段:-1/1} )</code></p>
<p>参数说明：</p>
<ul>
<li>1：代表升序排列，相当于 asc 的操作，默认为 asc</li>
<li>-1：代表降序排列，相当于 desc 的操作</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查找 _id 小于 10 的文档，按照 _id 字段降序(从大到小)排列</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class3.find(&#123;_id:&#123;<span class="string">'$lt'</span>:10&#125;&#125;).sort(&#123;_id:-1&#125;)</span></span><br></pre></td></tr></table></figure>
<h3 id="update"><a href="#update" class="headerlink" title="update"></a>update</h3><p>命令格式：<code>db.集合名称.update( {条件},{&#39;$set&#39;:{字段名:值}}, false, true )</code></p>
<blockquote>
<p>说明：</p>
</blockquote>
<ul>
<li>第3个参数表示关闭只修改单行记录功能，false 表示修改可以发生在多行记录中</li>
<li>第4个参数表示启动批量修改功能</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 把class3集合_id&lt;=5，name值改为tp5</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class3.update(&#123;_id:&#123;<span class="string">'$lte'</span>:5&#125;&#125;,&#123;<span class="string">'$set'</span>:&#123;name:<span class="string">'tp5'</span>&#125;&#125;,<span class="literal">false</span>,<span class="literal">true</span>)</span></span><br></pre></td></tr></table></figure>
<h3 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h3><p>语法：<code>db.集合名称.deleteMany( {条件} )</code></p>
<blockquote>
<p>注意：如果条件为空，则代表删除集合所有的文档</p>
</blockquote>
<p>案例1：删除 class2 集合中的 name=’dachui’ 的数据</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 案例1：删除 class2 集合中的 name=<span class="string">'dachui'</span> 的数据</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class2.deleteMany( &#123;name:<span class="string">'dachui'</span>&#125; )</span></span><br><span class="line">或</span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class2.remove( &#123;name:<span class="string">'dachui'</span>&#125; )</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除 class2 中所有数据(文档)</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class2.deleteMany(&#123;&#125;)</span></span><br><span class="line">或</span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class2.remove(&#123;&#125;)</span></span><br></pre></td></tr></table></figure>
<h3 id="or-操作符"><a href="#or-操作符" class="headerlink" title="$or 操作符"></a>$or 操作符</h3><p>作用：相当于 MySQL 当中 or 操作符</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查询 _id 为1 或者 _id 大于或等于 997 的文档</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class3.find(&#123;<span class="string">'$or'</span>:[&#123;_id:1&#125;,&#123;_id:&#123;<span class="string">'$gte'</span>:997&#125;&#125;]&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查询 _id = 10 或者 name = stu99 或者 _id = 100 的记录(文档)</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class3.find(&#123;<span class="string">'$or'</span>:[&#123;_id:10&#125;,&#123;name:<span class="string">'stu99'</span>&#125;,&#123;_id:100&#125;]&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查询 _id 小于等于 5 或者 name 为 stu100 文档</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class3.find(&#123;<span class="string">'$or'</span>:[&#123;_id:&#123;<span class="string">'$lte'</span>:5&#125;&#125;,&#123;name:<span class="string">'stu100'</span>&#125;]&#125;)</span></span><br></pre></td></tr></table></figure>
<h3 id="and-操作符"><a href="#and-操作符" class="headerlink" title="$and 操作符"></a>$and 操作符</h3><p>作用：相当于 MySQL 中 and 操作符</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查询 _id 为5 与 name = stu5 的文档</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class3.find(&#123;<span class="string">'$and'</span>:[&#123;_id:5&#125;,&#123;name:<span class="string">'stu5'</span>&#125;]&#125;)</span></span><br></pre></td></tr></table></figure>
<h3 id="in-操作符"><a href="#in-操作符" class="headerlink" title="$in 操作符"></a>$in 操作符</h3><p>作用：相当于 MySQL 中 in 操作语句，不过 in 在 MongoDB 中是非常快速，因为 $in 一定可以使用上索引</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查询 _id 为 33，55，77，99 的记录</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class3.find( &#123;<span class="string">'_id'</span>:&#123;<span class="string">'$in'</span>:[33,55,77,99]&#125;&#125; )</span></span><br></pre></td></tr></table></figure>
<h2 id="索引和执行计划"><a href="#索引和执行计划" class="headerlink" title="索引和执行计划"></a>索引和执行计划</h2><p>索引目的提高查询的效率，如果在查询中能够使用上定义的索引就表示就是一个速度很快的查询</p>
<h3 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h3><p>语法格式：<code>db.集合名称.ensureIndex( {字段:1},{索引的属性} )</code></p>
<p>{字段:1}：表示在某个字段中设置索引，1 表示 true</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 为 class2 的 name 字段添加普通索引</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class2.ensureIndex( &#123;name:1&#125; )</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span><span class="bash"> 为 class3 的 name 字段添加唯一性索引</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class3.ensureIndex( &#123;name:1&#125;,&#123;unique:<span class="literal">true</span>&#125; )</span></span><br></pre></td></tr></table></figure>
<h3 id="执行计划-explain"><a href="#执行计划-explain" class="headerlink" title="执行计划 explain"></a>执行计划 explain</h3><p>执行计划是查看一个 find() 是否可以使用上索引</p>
<p>语法：<code>db.集合名称.find( {条件} ).explain()</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看是否使用索引</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class3.find(&#123;name:<span class="string">'sut101'</span>&#125;).explain()</span></span><br></pre></td></tr></table></figure>
<h3 id="索引相关指令"><a href="#索引相关指令" class="headerlink" title="索引相关指令"></a>索引相关指令</h3><h4 id="getIndexes"><a href="#getIndexes" class="headerlink" title="getIndexes()"></a>getIndexes()</h4><p>命令的作用：用于查询一个集合当中的索引有哪些</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查询 class3 中使用了哪些索引</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class3.getIndexes()</span></span><br></pre></td></tr></table></figure>
<h4 id="dropIndex"><a href="#dropIndex" class="headerlink" title="dropIndex()"></a>dropIndex()</h4><p>命令作用：删除集合中指定的索引</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 删除 class3 中的索引，索引名称 name_1 的索引</span></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.class3.dropIndex( <span class="string">"name_1"</span> )</span></span><br></pre></td></tr></table></figure>
<h2 id="安全权限验证"><a href="#安全权限验证" class="headerlink" title="安全权限验证"></a>安全权限验证</h2><p>MongoDB号称世界上 NoSQL 产品中最安全的产品，MongoDB 拥有权限验证机制和加密功能，</p>
<h3 id="启动安全验证"><a href="#启动安全验证" class="headerlink" title="启动安全验证"></a>启动安全验证</h3><ol>
<li><p>切换到隐藏数据库 admin 当中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> use admin</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>添加用户并指定权限</p>
<blockquote>
<p>语法：</p>
</blockquote>
<p><code>db.createUser({user:(&quot;username&quot;),pwd:(&quot;password&quot;),roles:[{role:(&quot;root&quot;),db:&quot;dbName&quot;}]})</code></p>
<blockquote>
<p>参数说明：</p>
</blockquote>
<ul>
<li>username：用户名</li>
<li>password：密码</li>
<li>root：权限</li>
<li>dbName：数据库名</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.createUser(&#123;user:<span class="string">"root"</span>,<span class="built_in">pwd</span>:<span class="string">"123456"</span>,roles:[&#123;role:<span class="string">"root"</span>,db:<span class="string">'admin'</span>&#125;]&#125;)</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：密码必须要用引号引住</p>
</blockquote>
<p>当我们添加完用户后，会出现一个system.users 的集合，专门用于存放 MongoDB 的管理员数据</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> show tables</span></span><br><span class="line">system.users</span><br><span class="line">system.version</span><br><span class="line"></span><br><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> db.system.users.find()</span></span><br><span class="line">&#123; "_id" : "admin.root", "user" : "root", "db" : "admin", "credentials" : &#123; "SCRAM-SHA-1" : &#123; "iterationCount" : 10000, "salt" : "ioc0EPFBytxNdBdgPyFNJg==", "storedKey" : "wGr9Xm+z02dZ5slccRHMZrjZfnM=", "serverKey" : "vDaOb64fKAr1LB3aupKvzGKCbOk=" &#125; &#125;, "roles" : [ &#123; "role" : "root", "db" : "admin" &#125; ] &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用 exit 命令退出 MongoDB</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">MongoDB&gt;</span><span class="bash"> <span class="built_in">exit</span></span></span><br></pre></td></tr></table></figure>
<p>建议为了包含 Mongod.conf 不被其他用户修改，所以要停止</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">shell&gt;</span><span class="bash"><span class="comment"># service mongod stop</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>修改 /etc/mongod.conf 文件</p>
<ul>
<li>打开</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vim /etc/mongod.conf</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>找security选项,中的#去掉，并在其下一行，空两个空格，加上<code>authorization: enabled</code></p>
<p><img src="/images/235.jpg" alt="235"></p>
</li>
<li><p>保存退出</p>
</li>
<li><p>重启 MongoDB服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> service mongod start</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>重新登陆</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mongo -uroot -p123456 localhost:27017/admin</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h2 id="修改-root-密码"><a href="#修改-root-密码" class="headerlink" title="修改 root 密码"></a>修改 root 密码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法：db.updateUser(username，update[pwd:密码，writeConcern])</span><br></pre></td></tr></table></figure>
<p>将 root 用户密码修改为：654321</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MongoDB&gt; db.updateUser(&apos;root&apos;,&#123;pwd:&apos;654321&apos;,roles:[&#123;role:&apos;root&apos;,db:&apos;admin&apos;&#125;]&#125;)</span><br></pre></td></tr></table></figure>
<p>重新登陆</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">shell&gt;</span><span class="bash"><span class="comment"># mongo -uroot -p123456 localhost:27017/admin</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：</p>
</blockquote>
<p>登陆成功后，密码被修改了，如果用户没有退出，还是可以继续操作MongoDB</p>
<h2 id="开启-MongoDB-扩展"><a href="#开启-MongoDB-扩展" class="headerlink" title="开启 MongoDB 扩展"></a>开启 MongoDB 扩展</h2><h3 id="安装-5"><a href="#安装-5" class="headerlink" title="安装"></a>安装</h3><ol>
<li><p>下载</p>
<p>载地址：<a href="https://pecl.php.net/package/mongodb" target="_blank" rel="noopener">https://pecl.php.net/package/mongodb</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">shell&gt;</span><span class="bash"><span class="comment"># wget https://pecl.php.net/get/mongodb-1.5.3.tgz</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>上传到服务器</p>
</li>
<li><p>解压与进入目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> tar -zxvf mongodb-1.5.3.tgz</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> mongodb-1.5.3</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>生成编译文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> /usr/<span class="built_in">local</span>/php/bin/phpize</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>进行软件配置和环境检测</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ./configure --with-php-config=/usr/<span class="built_in">local</span>/php/bin/php-config</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编译软件并且进行安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="配置-6"><a href="#配置-6" class="headerlink" title="配置"></a>配置</h3><ol>
<li>修改 php.ini 加载 MongoDB 组件</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">shell&gt;</span><span class="bash"><span class="comment"># vim /usr/local/php/etc/php.ini</span></span></span><br></pre></td></tr></table></figure>
<p><img src="/images/236.jpg" alt="236"></p>
<ol>
<li><p>结束PHP进程</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> pkill  -9  php-fpm</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>重新启动PHP进程</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> service php-fpm start</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>检查是否添加成功</p>
</li>
</ol>
<h2 id="PHP操作MongoDB"><a href="#PHP操作MongoDB" class="headerlink" title="PHP操作MongoDB"></a>PHP操作MongoDB</h2><p>开发文档：<a href="http://php.net/manual/zh/book.mongodb.php" target="_blank" rel="noopener">http://php.net/manual/zh/book.mongodb.php</a></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="comment">// 实例MongoDB对象</span></span><br><span class="line">    $mongo = <span class="keyword">new</span> MongoDB\Driver\Manager(<span class="string">'mongodb://root:123456@localhost:27017/admin'</span>);</span><br><span class="line">    var_dump($mongo);</span><br></pre></td></tr></table></figure>
<p><img src="/images/53.png" alt="53"></p>
<h3 id="查询数据-1"><a href="#查询数据-1" class="headerlink" title="查询数据"></a>查询数据</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="comment">// 实例MongoDB对象</span></span><br><span class="line">    $mongo = <span class="keyword">new</span> MongoDB\Driver\Manager(<span class="string">'mongodb://root:123456@localhost:27017/admin'</span>);</span><br><span class="line">    $filter = [];</span><br><span class="line">    $options = [];</span><br><span class="line">    $query = <span class="keyword">new</span> MongoDB\Driver\Query($filter,$options);</span><br><span class="line">    $data = $mongo-&gt;executeQuery(<span class="string">'php33.class3'</span>,$query);</span><br><span class="line">    var_dump(iterator_to_array($data));</span><br></pre></td></tr></table></figure>
<h3 id="使用操作符"><a href="#使用操作符" class="headerlink" title="使用操作符"></a>使用操作符</h3><p>【例1】查询 class3 中 _id 大于或等于 10 的文档</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="comment">// 实例MongoDB对象</span></span><br><span class="line">    $mongo = <span class="keyword">new</span> MongoDB\Driver\Manager(<span class="string">'mongodb://root:123456@localhost:27017/admin'</span>);</span><br><span class="line">    $filter = [</span><br><span class="line">        <span class="string">'_id'</span>=&gt;[</span><br><span class="line">        	<span class="string">'$gte'</span>=&gt;<span class="number">10</span></span><br><span class="line">        ]</span><br><span class="line">    ];</span><br><span class="line">    $options = [];</span><br><span class="line">    $query = <span class="keyword">new</span> MongoDB\Driver\Query($filter,$options);</span><br><span class="line">    $data = $mongo-&gt;executeQuery(<span class="string">'php33.class3'</span>,$query);</span><br><span class="line">    var_dump(iterator_to_array($data));</span><br></pre></td></tr></table></figure>
<p>【例2】查询 class3 中 _id &gt;= 10 或者 name = stu6 的文档，且把文档按照降序(desc)排列</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="comment">// 实例MongoDB对象</span></span><br><span class="line">    $mongo = <span class="keyword">new</span> MongoDB\Driver\Manager(<span class="string">'mongodb://root:123456@localhost:27017/admin'</span>);</span><br><span class="line">    $filter = [</span><br><span class="line">        <span class="string">'$or'</span>=&gt;[</span><br><span class="line">            [<span class="string">'_id'</span>=&gt;[<span class="string">'$gte'</span>=&gt;<span class="number">10</span>]],</span><br><span class="line">            [<span class="string">'name'</span>=&gt;<span class="string">'stu6'</span>]</span><br><span class="line">        ]</span><br><span class="line">    ];</span><br><span class="line">	$options = [</span><br><span class="line">   		<span class="string">'sort'</span>=&gt;[<span class="string">'_id'</span>=&gt;<span class="number">-1</span>]</span><br><span class="line">	];</span><br><span class="line">    $query = <span class="keyword">new</span> MongoDB\Driver\Query($filter,$options);</span><br><span class="line">    $data = $mongo-&gt;executeQuery(<span class="string">'php33.class3'</span>,$query);</span><br><span class="line">    var_dump(iterator_to_array($data));</span><br></pre></td></tr></table></figure>
<p>【例3】修改 class3 中 _id 小于或等于9 的记录中的 lesson 字段的值为 swoole</p>
<ul>
<li>multi参数    true为批量修改，false为只修改单行记录功能</li>
<li>upsert参数   true为批量修改，false为只修改单行记录功能</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="comment">// 实例MongoDB对象</span></span><br><span class="line">    $mongo = <span class="keyword">new</span> MongoDB\Driver\Manager(<span class="string">'mongodb://root:123456@localhost:27017/admin'</span>);</span><br><span class="line">    $upd = <span class="keyword">new</span> MongoDB\Driver\BulkWrite;</span><br><span class="line">    $upd-&gt;update(</span><br><span class="line">        [<span class="string">'_id'</span>=&gt;[<span class="string">'$lte'</span>=&gt;<span class="number">9</span>]],</span><br><span class="line">        [<span class="string">'$set'</span>=&gt;[<span class="string">'lesson'</span>=&gt;<span class="string">'swoole'</span>]],</span><br><span class="line">        [<span class="string">'multi'</span>=&gt;<span class="keyword">true</span>,<span class="string">'upsert'</span>=&gt;<span class="keyword">true</span>]</span><br><span class="line">    );</span><br><span class="line">    $data = $mongo-&gt;executeQuery(<span class="string">'php33.class3'</span>,$upd);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;pre&gt;"</span>;</span><br><span class="line">    var_dump(iterator_to_array($data));</span><br></pre></td></tr></table></figure>
<p>【例4】删除 _id 为 11,9,15 的数据</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/linux/" rel="tag"># linux</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/01/08/quick-tools/" rel="next" title="quick-工具">
                <i class="fa fa-chevron-left"></i> quick-工具
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/01/08/quick-php/" rel="prev" title="quick-php">
                quick-php <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/a.jpg" alt="JIUXINYAN">
            
              <p class="site-author-name" itemprop="name">JIUXINYAN</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">12</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">2</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">8</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/JIUXINYAN" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="691661505@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://github.com/JIUXINYAN.com/" title="moxin" target="_blank">moxin</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Linux"><span class="nav-number">1.</span> <span class="nav-text">Linux</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#文件和目录"><span class="nav-number">1.1.</span> <span class="nav-text">文件和目录</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#linux目录"><span class="nav-number">1.1.1.</span> <span class="nav-text">linux目录</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#第一级目录"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">第一级目录</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#linux文件"><span class="nav-number">1.1.2.</span> <span class="nav-text">linux文件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#文件类型"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">文件类型</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#权限"><span class="nav-number">1.1.3.</span> <span class="nav-text">权限</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#文件权限"><span class="nav-number">1.1.3.1.</span> <span class="nav-text">文件权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#目录权限"><span class="nav-number">1.1.3.2.</span> <span class="nav-text">目录权限</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#linux命令"><span class="nav-number">1.2.</span> <span class="nav-text">linux命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#开机关机"><span class="nav-number">1.2.1.</span> <span class="nav-text">开机关机</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#系统管理"><span class="nav-number">1.2.2.</span> <span class="nav-text">系统管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件目录"><span class="nav-number">1.2.3.</span> <span class="nav-text">文件目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#时间日期"><span class="nav-number">1.2.4.</span> <span class="nav-text">时间日期</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#搜索查找"><span class="nav-number">1.2.5.</span> <span class="nav-text">搜索查找</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#备份压缩"><span class="nav-number">1.2.6.</span> <span class="nav-text">备份压缩</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分区磁盘"><span class="nav-number">1.2.7.</span> <span class="nav-text">分区磁盘</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#进程服务"><span class="nav-number">1.2.8.</span> <span class="nav-text">进程服务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网络通讯"><span class="nav-number">1.2.9.</span> <span class="nav-text">网络通讯</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Shell"><span class="nav-number">1.3.</span> <span class="nav-text">Shell</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#crond任务调度"><span class="nav-number">1.3.1.</span> <span class="nav-text">crond任务调度</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux分区"><span class="nav-number">1.4.</span> <span class="nav-text">Linux分区</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#硬盘说明"><span class="nav-number">1.4.1.</span> <span class="nav-text">硬盘说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增加硬盘"><span class="nav-number">1.4.2.</span> <span class="nav-text">增加硬盘</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1）虚拟机添加硬盘"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">1）虚拟机添加硬盘</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2）分区"><span class="nav-number">1.4.2.2.</span> <span class="nav-text">2）分区</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3）格式化"><span class="nav-number">1.4.2.3.</span> <span class="nav-text">3）格式化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4）挂载"><span class="nav-number">1.4.2.4.</span> <span class="nav-text">4）挂载</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5）设置自动挂载"><span class="nav-number">1.4.2.5.</span> <span class="nav-text">5）设置自动挂载</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6）断开挂载"><span class="nav-number">1.4.2.6.</span> <span class="nav-text">6）断开挂载</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#网络配置"><span class="nav-number">1.5.</span> <span class="nav-text">网络配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#虚拟机网络连接"><span class="nav-number">1.5.1.</span> <span class="nav-text">虚拟机网络连接</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#桥接模式"><span class="nav-number">1.5.1.1.</span> <span class="nav-text">桥接模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#NAT模式"><span class="nav-number">1.5.1.2.</span> <span class="nav-text">NAT模式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看网络IP和网关"><span class="nav-number">1.5.2.</span> <span class="nav-text">查看网络IP和网关</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#修改虚拟网卡的ip地址"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">修改虚拟网卡的ip地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看网关"><span class="nav-number">1.5.2.2.</span> <span class="nav-text">查看网关</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网络环境配置"><span class="nav-number">1.5.3.</span> <span class="nav-text">网络环境配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#自动获取"><span class="nav-number">1.5.3.1.</span> <span class="nav-text">自动获取</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#指定固定的IP"><span class="nav-number">1.5.3.2.</span> <span class="nav-text">指定固定的IP</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#服务管理"><span class="nav-number">1.6.</span> <span class="nav-text">服务管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#查看服务名"><span class="nav-number">1.6.1.</span> <span class="nav-text">查看服务名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#服务的运行级别"><span class="nav-number">1.6.2.</span> <span class="nav-text">服务的运行级别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置自启动"><span class="nav-number">1.6.3.</span> <span class="nav-text">设置自启动</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RPM和YUM"><span class="nav-number">1.7.</span> <span class="nav-text">RPM和YUM</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#RPM包管理"><span class="nav-number">1.7.1.</span> <span class="nav-text">RPM包管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#查询"><span class="nav-number">1.7.1.1.</span> <span class="nav-text">查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#卸载"><span class="nav-number">1.7.1.2.</span> <span class="nav-text">卸载</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#安装"><span class="nav-number">1.7.1.3.</span> <span class="nav-text">安装</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#YUM包管理"><span class="nav-number">1.7.2.</span> <span class="nav-text">YUM包管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#更换yum源"><span class="nav-number">1.7.2.1.</span> <span class="nav-text">更换yum源</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#WEB环境搭建"><span class="nav-number">1.8.</span> <span class="nav-text">WEB环境搭建</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#底层软件库"><span class="nav-number">1.8.1.</span> <span class="nav-text">底层软件库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装MySQL"><span class="nav-number">1.8.2.</span> <span class="nav-text">安装MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#安装依赖库"><span class="nav-number">1.8.2.1.</span> <span class="nav-text">安装依赖库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#安装MySQL-1"><span class="nav-number">1.8.2.2.</span> <span class="nav-text">安装MySQL</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#配置"><span class="nav-number">1.8.2.3.</span> <span class="nav-text">配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#启动mysql"><span class="nav-number">1.8.2.4.</span> <span class="nav-text">启动mysql</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装PHP"><span class="nav-number">1.8.3.</span> <span class="nav-text">安装PHP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#安装-1"><span class="nav-number">1.8.3.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#配置-1"><span class="nav-number">1.8.3.2.</span> <span class="nav-text">配置</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装Apache"><span class="nav-number">1.8.4.</span> <span class="nav-text">安装Apache</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#安装依赖库-1"><span class="nav-number">1.8.4.1.</span> <span class="nav-text">安装依赖库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#安装apache"><span class="nav-number">1.8.4.2.</span> <span class="nav-text">安装apache</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#配置-2"><span class="nav-number">1.8.4.3.</span> <span class="nav-text">配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#整合PHP"><span class="nav-number">1.8.4.4.</span> <span class="nav-text">整合PHP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#开放端口"><span class="nav-number">1.8.4.5.</span> <span class="nav-text">开放端口</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vim"><span class="nav-number">1.9.</span> <span class="nav-text">vim</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#快捷键"><span class="nav-number">1.9.1.</span> <span class="nav-text">快捷键</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#编辑模式"><span class="nav-number">1.9.2.</span> <span class="nav-text">编辑模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#末行模式"><span class="nav-number">1.9.3.</span> <span class="nav-text">末行模式</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#NoSql"><span class="nav-number">2.</span> <span class="nav-text">NoSql</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Memcache"><span class="nav-number">2.1.</span> <span class="nav-text">Memcache</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux中"><span class="nav-number">2.1.1.</span> <span class="nav-text">Linux中</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#安装-2"><span class="nav-number">2.1.1.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#启动服务"><span class="nav-number">2.1.1.2.</span> <span class="nav-text">启动服务</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#启动Memcache"><span class="nav-number">2.1.1.2.1.</span> <span class="nav-text">启动Memcache</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#启动Telnet"><span class="nav-number">2.1.1.2.2.</span> <span class="nav-text">启动Telnet</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#telnet连接Memcache"><span class="nav-number">2.1.1.3.</span> <span class="nav-text">telnet连接Memcache</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#开启PHP扩展"><span class="nav-number">2.1.1.4.</span> <span class="nav-text">开启PHP扩展</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Memcache扩展"><span class="nav-number">2.1.1.4.1.</span> <span class="nav-text">Memcache扩展</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#安装-3"><span class="nav-number">2.1.1.4.1.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#配置-3"><span class="nav-number">2.1.1.4.1.2.</span> <span class="nav-text">配置</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Memcached扩展"><span class="nav-number">2.1.1.4.2.</span> <span class="nav-text">Memcached扩展</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#安装依赖库-2"><span class="nav-number">2.1.1.4.2.1.</span> <span class="nav-text">安装依赖库</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#安装memcached"><span class="nav-number">2.1.1.4.2.2.</span> <span class="nav-text">安装memcached</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#配置-4"><span class="nav-number">2.1.1.4.2.3.</span> <span class="nav-text">配置</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#windows中"><span class="nav-number">2.1.2.</span> <span class="nav-text">windows中</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#开启PHP扩展-1"><span class="nav-number">2.1.2.1.</span> <span class="nav-text">开启PHP扩展</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#安装-amp-开启服务"><span class="nav-number">2.1.2.2.</span> <span class="nav-text">安装&amp;开启服务</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常用指令"><span class="nav-number">2.1.3.</span> <span class="nav-text">常用指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类常用方法"><span class="nav-number">2.1.4.</span> <span class="nav-text">类常用方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#连接服务器"><span class="nav-number">2.1.4.1.</span> <span class="nav-text">连接服务器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#set方法"><span class="nav-number">2.1.4.2.</span> <span class="nav-text">set方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#操作分布式服务器"><span class="nav-number">2.1.4.3.</span> <span class="nav-text">操作分布式服务器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis"><span class="nav-number">2.2.</span> <span class="nav-text">Redis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis和Memcache区别"><span class="nav-number">2.2.1.</span> <span class="nav-text">Redis和Memcache区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装和启动"><span class="nav-number">2.2.2.</span> <span class="nav-text">安装和启动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#启动登录客户端"><span class="nav-number">2.2.3.</span> <span class="nav-text">启动登录客户端</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#启动redis服务器"><span class="nav-number">2.2.3.1.</span> <span class="nav-text">启动redis服务器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#链接Redis"><span class="nav-number">2.2.3.2.</span> <span class="nav-text">链接Redis</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#停止redis服务"><span class="nav-number">2.2.3.3.</span> <span class="nav-text">停止redis服务</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据类型-amp-命令"><span class="nav-number">2.2.4.</span> <span class="nav-text">数据类型&amp;命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#String数据类型"><span class="nav-number">2.2.4.1.</span> <span class="nav-text">String数据类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#hash数据类型"><span class="nav-number">2.2.4.2.</span> <span class="nav-text">hash数据类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#list数据类型"><span class="nav-number">2.2.4.3.</span> <span class="nav-text">list数据类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#set数据类型-无序"><span class="nav-number">2.2.4.4.</span> <span class="nav-text">set数据类型(无序)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#zset数据类型-有序"><span class="nav-number">2.2.4.5.</span> <span class="nav-text">zset数据类型(有序)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#管理命令"><span class="nav-number">2.2.5.</span> <span class="nav-text">管理命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安全认证"><span class="nav-number">2.2.6.</span> <span class="nav-text">安全认证</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis的持久化-AOF-设置"><span class="nav-number">2.2.7.</span> <span class="nav-text">Redis的持久化 AOF 设置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#快照模式"><span class="nav-number">2.2.7.1.</span> <span class="nav-text">快照模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Aof模式"><span class="nav-number">2.2.7.2.</span> <span class="nav-text">Aof模式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#设置aof模式"><span class="nav-number">2.2.7.2.1.</span> <span class="nav-text">设置aof模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PHP-中开启-Redis-扩展"><span class="nav-number">2.2.7.3.</span> <span class="nav-text">PHP 中开启 Redis 扩展</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#安装-4"><span class="nav-number">2.2.7.3.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#配置-5"><span class="nav-number">2.2.7.3.2.</span> <span class="nav-text">配置</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PHP操作Redis"><span class="nav-number">2.2.8.</span> <span class="nav-text">PHP操作Redis</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#连接Redis"><span class="nav-number">2.2.8.1.</span> <span class="nav-text">连接Redis</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#各种数据类型的操作"><span class="nav-number">2.2.8.2.</span> <span class="nav-text">各种数据类型的操作</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#string-类型"><span class="nav-number">2.2.8.2.1.</span> <span class="nav-text">string 类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#hash-类型"><span class="nav-number">2.2.8.2.2.</span> <span class="nav-text">hash 类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#set无序集合"><span class="nav-number">2.2.8.2.3.</span> <span class="nav-text">set无序集合</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#zset有序集合"><span class="nav-number">2.2.8.2.4.</span> <span class="nav-text">zset有序集合</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis-实现消息队列"><span class="nav-number">2.2.9.</span> <span class="nav-text">Redis 实现消息队列</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MongoDB"><span class="nav-number">3.</span> <span class="nav-text">MongoDB</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装-启动"><span class="nav-number">3.1.</span> <span class="nav-text">安装 启动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#db相关命令"><span class="nav-number">3.2.</span> <span class="nav-text">db相关命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#登录退出"><span class="nav-number">3.2.1.</span> <span class="nav-text">登录退出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看所有db"><span class="nav-number">3.2.2.</span> <span class="nav-text">查看所有db</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看目前db"><span class="nav-number">3.2.3.</span> <span class="nav-text">查看目前db</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#选择-创建db"><span class="nav-number">3.2.4.</span> <span class="nav-text">选择/创建db</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除db"><span class="nav-number">3.2.5.</span> <span class="nav-text">删除db</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#帮助文档"><span class="nav-number">3.2.6.</span> <span class="nav-text">帮助文档</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#集合相关命令"><span class="nav-number">3.3.</span> <span class="nav-text">集合相关命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#显示当前集合"><span class="nav-number">3.3.1.</span> <span class="nav-text">显示当前集合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建集合"><span class="nav-number">3.3.2.</span> <span class="nav-text">创建集合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查询数据"><span class="nav-number">3.3.3.</span> <span class="nav-text">查询数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sort排序"><span class="nav-number">3.3.4.</span> <span class="nav-text">sort排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#update"><span class="nav-number">3.3.5.</span> <span class="nav-text">update</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#remove"><span class="nav-number">3.3.6.</span> <span class="nav-text">remove</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#or-操作符"><span class="nav-number">3.3.7.</span> <span class="nav-text">$or 操作符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#and-操作符"><span class="nav-number">3.3.8.</span> <span class="nav-text">$and 操作符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#in-操作符"><span class="nav-number">3.3.9.</span> <span class="nav-text">$in 操作符</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#索引和执行计划"><span class="nav-number">3.4.</span> <span class="nav-text">索引和执行计划</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建索引"><span class="nav-number">3.4.1.</span> <span class="nav-text">创建索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#执行计划-explain"><span class="nav-number">3.4.2.</span> <span class="nav-text">执行计划 explain</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#索引相关指令"><span class="nav-number">3.4.3.</span> <span class="nav-text">索引相关指令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#getIndexes"><span class="nav-number">3.4.3.1.</span> <span class="nav-text">getIndexes()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dropIndex"><span class="nav-number">3.4.3.2.</span> <span class="nav-text">dropIndex()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安全权限验证"><span class="nav-number">3.5.</span> <span class="nav-text">安全权限验证</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#启动安全验证"><span class="nav-number">3.5.1.</span> <span class="nav-text">启动安全验证</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改-root-密码"><span class="nav-number">3.6.</span> <span class="nav-text">修改 root 密码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#开启-MongoDB-扩展"><span class="nav-number">3.7.</span> <span class="nav-text">开启 MongoDB 扩展</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装-5"><span class="nav-number">3.7.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置-6"><span class="nav-number">3.7.2.</span> <span class="nav-text">配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PHP操作MongoDB"><span class="nav-number">3.8.</span> <span class="nav-text">PHP操作MongoDB</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#查询数据-1"><span class="nav-number">3.8.1.</span> <span class="nav-text">查询数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用操作符"><span class="nav-number">3.8.2.</span> <span class="nav-text">使用操作符</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JIUXINYAN</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Pisces</a> v6.0.6</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.6"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.6"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.6"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.6"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.6"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.6"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.6"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

</body>
</html>
